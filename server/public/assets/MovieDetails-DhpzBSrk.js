import{ao as K,j,u as te,r as a,b as e,T as l,L as $,B as v,ac as Y,d as A,C as B,an as fe,k as ae,s as G,a as me,at as re,ak as De,al as xe,y as P,I as F,m as Ne,e as be,c as ie,au as he,P as oe,E as R}from"./index-BUcdUimO.js";import{c as pe,f as Me,l as Ce,v as ze,d as ge,e as je}from"./commentService-HOQTS3-a.js";import{L as le}from"./Link-CloETyk6.js";import{T as Ee}from"./TextField-B1jhLvMe.js";import{C as Ve}from"./ConfirmationDialog-DonenFNK.js";import{A as H}from"./ArrowBack-B9LFNnFI.js";import{G as U}from"./Grid-BH2Jqrkc.js";import{C as Ke}from"./CardMedia-C75dcw1F.js";import{C as _}from"./Chip-B6HZ9hyN.js";import{C as ye}from"./CalendarToday-rIdOMvDA.js";import"./DialogTitle-Bh-EomZ1.js";import"./DialogContentText-D9mQyeeU.js";import"./DialogActions-BMAPaHA0.js";const ke=K([j.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),j.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),Ie=K(j.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline"),Ae=K(j.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline"),Le=K(j.jsx("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply"),Se=K(j.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),we=K(j.jsx("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m4 0v12h4V3z"}),"ThumbDown"),Te=K(j.jsx("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m0 12-4.34 4.34L12 14H3v-2l3-7h9zm4-12h4v12h-4z"}),"ThumbDownOutlined"),Re=K(j.jsx("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp"),_e=K(j.jsx("path",{d:"M9 21h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.58 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2M9 9l4.34-4.34L12 10h9v2l-3 7H9zM1 9h4v12H1z"}),"ThumbUpOutlined"),ne={"movie-poster":"_movie-poster_xef9j_3","genre-chip":"_genre-chip_xef9j_13"},de=({movieId:i,parentId:b=null,onCommentAdded:u,placeholder:s="Şərhinizi yazın...",buttonText:M="Göndər",variant:r="filled",showCancelButton:x=!1,onCancel:f})=>{const{isLoggedIn:m}=te(),[E,V]=a.useState(""),[h,p]=a.useState(!1),[n,c]=a.useState(null),N=async d=>{var I,o;if(d.preventDefault(),!E.trim()||!m)return;p(!0),c(null);const y={content:E,movieId:i,parentId:b};try{await pe(y),b?fe("Cavabınız təsdiq üçün göndərildi."):ae("Şərhiniz təsdiq üçün göndərildi və admin tərəfindən yoxlanılır!"),V(""),c(null),u&&u(),x&&f&&f()}catch(t){console.error("Yorum gönderme hatası:",t);let C="Şərh göndərilərkən xəta baş verdi.";typeof t=="string"?C=t:(o=(I=t==null?void 0:t.response)==null?void 0:I.data)!=null&&o.error?C=t.response.data.error:t!=null&&t.message&&(C=t.message),C.includes("uuid")&&(C="Sistem xətası: Texniki dəstəklə əlaqə saxlayın."),c(C),G(C)}finally{p(!1)}};return m?e.jsxDEV(v,{component:"form",onSubmit:N,sx:{mt:b?1:2},children:[e.jsxDEV(Ee,{fullWidth:!0,multiline:!0,rows:b?2:3,variant:r,label:s,value:E,onChange:d=>V(d.target.value),disabled:h,required:!0,sx:{mb:1,bgcolor:r==="filled"?"action.hover":void 0},InputProps:{disableUnderline:r==="filled"}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:99,columnNumber:13},void 0),n&&e.jsxDEV(Y,{severity:"error",sx:{mb:1},children:n},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:113,columnNumber:17},void 0),e.jsxDEV(v,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[x&&e.jsxDEV(A,{variant:"text",onClick:f,disabled:h,size:"small",children:"Ləğv et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:117,columnNumber:21},void 0),e.jsxDEV(A,{type:"submit",variant:"contained",disabled:h||!E.trim(),size:"small",startIcon:h?e.jsxDEV(B,{size:16,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:131,columnNumber:44},void 0):null,children:M},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:126,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:115,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:98,columnNumber:9},void 0):e.jsxDEV(l,{variant:"body2",color:"text.secondary",children:["Şərh yazmaq üçün ",e.jsxDEV(le,{component:$,to:"/login",children:"daxil olun"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:94,columnNumber:84},void 0),"."]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:94,columnNumber:16},void 0)},Fe=({comment:i,movieId:b,onVoteChange:u,onReplyAdded:s,onDelete:M,level:r=0})=>{var Q,X,J,Z,ee,se;const{isLoggedIn:x,isAdmin:f,userId:m}=te(),E=me(),[V,h]=a.useState(!1),[p,n]=a.useState(!1),[c,N]=a.useState(!1),[d,y]=re.useState(null),[I,o]=a.useState(!1),{isUserOnline:t}=De(),C=D=>{try{return Me(new Date(D),{addSuffix:!0,locale:Ce})}catch(L){return console.error("Date formatting error:",L),D}},k=m!==null&&m===i.user_id,z=()=>{var D;return k&&m?t(m):(D=i.author)!=null&&D.id?t(i.author.id):!1},q=async D=>{if(!x||p||k)return;n(!0);const L=i.likes,O=i.dislikes,S=i.user_vote;let w=L,T=O,W=null;S===D?(W=null,D==="like"?w--:T--):(W=D,D==="like"?(w++,S==="dislike"&&T--):(T++,S==="like"&&w--)),u(i.id,w,T,W);try{const g=await ze(i.id,{voteType:D});if(g&&typeof g.likes=="number"&&typeof g.dislikes=="number"){const ve=g.user_vote;u(i.id,g.likes,g.dislikes,ve)}else console.warn("Backend'den səs məlumatları düzgün formatda gəlmədi."),u(i.id,L,O,S??null)}catch(g){G((g==null?void 0:g.message)||"Oy verərkən xəta baş verdi."),u(i.id,L,O,S??null)}finally{n(!1)}},ue=()=>{o(!0)},ce=async()=>{if(!(!f||c)){N(!0);try{await ge(i.id),ae("Şərh silindi."),o(!1),M(i.id)}catch(D){G((D==null?void 0:D.message)||"Şərh silinərkən xəta baş verdi."),o(!1)}finally{N(!1)}}};return e.jsxDEV(v,{sx:{display:"flex",gap:2,py:2,px:r>0?1:0,ml:r*(r>1?3:4),borderLeft:r>0?`2px solid ${E.palette.divider}`:"none",pl:r>0?2:0,position:"relative"},children:[e.jsxDEV(xe,{component:$,to:`/user/username/${(Q=i.author)==null?void 0:Q.username}`,src:((X=i.author)==null?void 0:X.avatar_url)||"",alt:((J=i.author)==null?void 0:J.username)||"Anonim",isOnline:z(),size:36},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:160,columnNumber:13},void 0),e.jsxDEV(v,{sx:{flexGrow:1},children:[e.jsxDEV(v,{sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsxDEV(le,{component:$,to:`/user/username/${(Z=i.author)==null?void 0:Z.username}`,underline:"hover",color:"primary.main",sx:{fontWeight:"medium",mr:1,fontSize:"0.9rem"},children:((ee=i.author)==null?void 0:ee.username)||"Anonim"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:170,columnNumber:21},void 0),e.jsxDEV(l,{variant:"caption",color:"text.secondary",children:C(i.created_at)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:179,columnNumber:21},void 0),f&&e.jsxDEV(P,{title:"Şərhi sil",arrow:!0,children:e.jsxDEV(F,{size:"small",onClick:ue,disabled:c,sx:{ml:"auto"},color:"error",children:c?e.jsxDEV(B,{size:16,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:192,columnNumber:50},void 0):e.jsxDEV(Ie,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:192,columnNumber:98},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:185,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:184,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:169,columnNumber:17},void 0),e.jsxDEV(l,{variant:"body2",sx:{mb:1},children:i.content},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:197,columnNumber:17},void 0),e.jsxDEV(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxDEV(P,{title:k?"Öz şərhinizə səs verə bilməzsiniz":"Bəyən",arrow:!0,placement:"top",children:e.jsxDEV("span",{children:e.jsxDEV(F,{size:"small",onClick:()=>q("like"),disabled:!x||p||k,color:i.user_vote==="like"?"primary":"default",children:i.user_vote==="like"?e.jsxDEV(Re,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:209,columnNumber:66},void 0):e.jsxDEV(_e,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:209,columnNumber:96},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:202,columnNumber:30},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:201,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:200,columnNumber:21},void 0),e.jsxDEV(l,{variant:"caption",sx:{fontWeight:500,minWidth:"1.5em"},children:i.likes},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:213,columnNumber:21},void 0),e.jsxDEV(P,{title:k?"Öz şərhinizə səs verə bilməzsiniz":"Bəyənmə",arrow:!0,placement:"top",children:e.jsxDEV("span",{children:e.jsxDEV(F,{size:"small",onClick:()=>q("dislike"),disabled:!x||p||k,color:i.user_vote==="dislike"?"error":"default",children:i.user_vote==="dislike"?e.jsxDEV(we,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:225,columnNumber:69},void 0):e.jsxDEV(Te,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:225,columnNumber:101},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:218,columnNumber:30},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:217,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:216,columnNumber:21},void 0),e.jsxDEV(l,{variant:"caption",sx:{fontWeight:500,minWidth:"1.5em"},children:i.dislikes},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:229,columnNumber:21},void 0),r<3&&x&&e.jsxDEV(A,{size:"small",startIcon:e.jsxDEV(Le,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:236,columnNumber:40},void 0),onClick:()=>h(!V),sx:{ml:1,textTransform:"none"},children:V?"Ləğv et":"Cavabla"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:234,columnNumber:26},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:198,columnNumber:17},void 0),V&&e.jsxDEV(de,{movieId:b,parentId:i.id,onCommentAdded:()=>{h(!1),s()},placeholder:`${((se=i.author)==null?void 0:se.username)||"Anonim"} adlı istifadəçiyə cavab ver...`,buttonText:"Cavab Göndər",variant:"standard",showCancelButton:!0,onCancel:()=>h(!1)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:246,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:168,columnNumber:13},void 0),e.jsxDEV(Ve,{open:I,onClose:()=>o(!1),onConfirm:ce,title:"Şərh Silmə Təsdiqi",message:e.jsxDEV(e.Fragment,{children:["Bu şərhi silmək istədiyinizə əminsinizmi? ",e.jsxDEV("br",{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:267,columnNumber:67},void 0),e.jsxDEV(l,{variant:"caption",color:"text.secondary",children:['"',e.jsxDEV("i",{children:[i.content.substring(0,50),i.content.length>50?"...":""]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:269,columnNumber:30},void 0),'"']},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:268,columnNumber:25},void 0)," ",e.jsxDEV("br",{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:270,columnNumber:39},void 0),"Bu əməliyyat geri alına bilməz."]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:266,columnNumber:21},void 0),confirmText:"Bəli, Sil",cancelText:"Xeyr, Ləğv Et",isLoading:c,confirmButtonColor:"error"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:260,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:148,columnNumber:9},void 0)},Be={"comment-list-container":"_comment-list-container_1a0h2_3"},Oe=({movieId:i,refreshKey:b})=>{const[u,s]=a.useState([]),[M,r]=a.useState(!0),[x,f]=a.useState(null),m=a.useCallback(async()=>{r(!0),f(null);try{const n=await je(i);s(n)}catch(n){f((n==null?void 0:n.message)||"Şərhlər yüklənərkən xəta baş verdi.")}finally{r(!1)}},[i]);a.useEffect(()=>{m()},[m,b]);const E=a.useCallback((n,c,N,d)=>{s(y=>y.map(o=>o.id===n?{...o,likes:c,dislikes:N,user_vote:d}:o))},[]),V=a.useCallback(n=>{s(c=>c.filter(N=>N.id!==n))},[]),h=a.useCallback(()=>{m()},[m]),p=(n,c=null,N=0)=>n.filter(d=>d.parent_comment_id===c).sort((d,y)=>new Date(y.created_at).getTime()-new Date(d.created_at).getTime()).map(d=>e.jsxDEV(re.Fragment,{children:[e.jsxDEV(Fe,{comment:d,movieId:i,onVoteChange:E,onReplyAdded:h,onDelete:V,level:N},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:80,columnNumber:21},void 0),p(n,d.id,N+1)]},d.id,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:79,columnNumber:17},void 0));return M?e.jsxDEV(v,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:3},children:[e.jsxDEV(B,{size:24,sx:{mr:1}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:100,columnNumber:17},void 0),e.jsxDEV(l,{variant:"body2",color:"text.secondary",children:"Şərhlər yüklənir..."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:101,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:99,columnNumber:13},void 0):x?e.jsxDEV(Y,{severity:"warning",sx:{mt:2},children:[x,e.jsxDEV(A,{size:"small",onClick:m,sx:{ml:1},children:"Yenidən cəhd et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:110,columnNumber:18},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:108,columnNumber:13},void 0):e.jsxDEV(v,{className:Be["comment-list-container"],sx:{mt:0},children:u.length===0?e.jsxDEV(l,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:3},children:"Hələ heç bir şərh yoxdur."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:118,columnNumber:18},void 0):p(u)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:116,columnNumber:9},void 0)},ss=()=>{const{movieId:i}=Ne(),b=me(),u=be(b.breakpoints.down("sm")),[s,M]=a.useState(null),[r,x]=a.useState(!0),[f,m]=a.useState(null),[E,V]=a.useState(""),[h,p]=a.useState(0);a.useEffect(()=>{let o=!0;return(async()=>{if(!i){o&&(m("Film ID tapılmadı."),x(!1));return}const k=`https://www.omdbapi.com/?i=${i}&apikey=b567a8f1&plot=full`;o&&(x(!0),m(null),M(null));try{const z=await he.get(k);z.data&&z.data.Response==="True"?o&&(M(z.data),m(null)):(console.error("OMDb API xətası:",z.data.Error),m(z.data.Error||"Film tapılmadı və ya API xətası."),M(null))}catch(z){console.error("OMDb API çağırışı zamanı xəta:",z),o&&(m(z.message||"Film detalları yüklənərkən bir xəta baş verdi."),M(null))}finally{o&&x(!1)}})(),()=>{o=!1}},[i]);const n=()=>{window.history.back()},c=()=>{p(o=>o+1)},N=()=>e.jsxDEV(v,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:[e.jsxDEV(B,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:154,columnNumber:13},void 0),e.jsxDEV(l,{sx:{ml:2},children:"Film Detalları Yüklənir..."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:155,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:153,columnNumber:9},void 0),d=()=>e.jsxDEV(ie,{maxWidth:"sm",sx:{mt:4,textAlign:"center"},children:[e.jsxDEV(Y,{severity:"error",icon:e.jsxDEV(Ae,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:161,columnNumber:44},void 0),variant:"outlined",sx:{mb:2,justifyContent:"center"},children:f||"Bilinməyən bir xəta baş verdi."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:161,columnNumber:14},void 0),e.jsxDEV(A,{variant:"outlined",startIcon:e.jsxDEV(H,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:164,columnNumber:52},void 0),onClick:n,children:"Geri Qayıt"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:164,columnNumber:14},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:160,columnNumber:9},void 0),y=()=>{if(!s||s.Response!=="True")return!r&&!f?(m("Film məlumatları düzgün formatda deyil."),d()):null;const o=typeof s.Genre=="string"?s.Genre.split(",").map(t=>t.trim()):[];return e.jsxDEV(oe,{elevation:u?0:3,sx:{p:{xs:2,sm:3,md:4},mt:2,bgcolor:"background.paper",borderRadius:u?0:2},children:[e.jsxDEV(A,{startIcon:e.jsxDEV(H,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:189,columnNumber:32},void 0),onClick:n,sx:{mb:2,display:{xs:"none",sm:"inline-flex"}},children:"Geri"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:188,columnNumber:17},void 0),e.jsxDEV(U,{container:!0,spacing:{xs:3,md:4},children:[e.jsxDEV(U,{item:!0,xs:12,sm:4,md:3,sx:{textAlign:"center"},children:e.jsxDEV(Ke,{component:"img",image:s.Poster!=="N/A"?s.Poster:"/placeholder-image.png",alt:`${s.Title} posteri`,className:ne["movie-poster"],sx:{borderRadius:2,width:"100%",maxWidth:{xs:"200px",sm:"100%"},height:"auto",objectFit:"cover",mb:2,boxShadow:`0 4px 12px ${b.palette.mode==="dark"?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.15)"}`,display:"inline-block"}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:198,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:197,columnNumber:21},void 0),e.jsxDEV(U,{item:!0,xs:12,sm:8,md:9,children:[e.jsxDEV(l,{variant:u?"h5":"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:s.Title||"Başlıq Yoxdur"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:217,columnNumber:25},void 0),e.jsxDEV(v,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:{xs:1,sm:1.5},mb:2.5},children:[s.Year&&s.Year!=="N/A"&&e.jsxDEV(_,{icon:e.jsxDEV(ye,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:227,columnNumber:80},void 0),label:s.Year,variant:"outlined",size:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:227,columnNumber:68},void 0),s.Runtime&&s.Runtime!=="N/A"&&e.jsxDEV(_,{icon:e.jsxDEV(ke,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:228,columnNumber:86},void 0),label:s.Runtime,variant:"outlined",size:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:228,columnNumber:74},void 0),s.imdbRating&&s.imdbRating!=="N/A"&&e.jsxDEV(_,{icon:e.jsxDEV(Se,{sx:{color:"#f5c518"}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:229,columnNumber:92},void 0),label:`IMDb: ${s.imdbRating}`,variant:"outlined",size:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:229,columnNumber:80},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:226,columnNumber:25},void 0),o.length>0&&o[0]!=="N/A"&&e.jsxDEV(v,{sx:{display:"flex",flexWrap:"wrap",gap:.8,mb:3},children:o.map(t=>e.jsxDEV(_,{label:t,size:"small",className:ne["genre-chip"],sx:{bgcolor:b.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",color:"text.secondary",fontWeight:500}},t,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:235,columnNumber:37},void 0))},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:233,columnNumber:30},void 0),e.jsxDEV(R,{sx:{mb:2.5}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:244,columnNumber:25},void 0),e.jsxDEV(l,{variant:"h6",gutterBottom:!0,children:"Məzmun"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:246,columnNumber:25},void 0),e.jsxDEV(l,{variant:"body1",paragraph:!0,sx:{color:"text.secondary"},children:s.Plot&&s.Plot!=="N/A"?s.Plot:"Məzmun məlumatı mövcud deyil."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:247,columnNumber:25},void 0),(s.Director&&s.Director!=="N/A"||s.Actors&&s.Actors!=="N/A")&&e.jsxDEV(R,{sx:{my:3}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:251,columnNumber:116},void 0),s.Director&&s.Director!=="N/A"&&e.jsxDEV(v,{sx:{mb:1.5},children:[e.jsxDEV(l,{variant:"overline",display:"block",color:"text.secondary",children:"Rejissor"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:254,columnNumber:33},void 0),e.jsxDEV(l,{variant:"body2",children:s.Director},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:255,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:253,columnNumber:29},void 0),s.Actors&&s.Actors!=="N/A"&&e.jsxDEV(v,{children:[e.jsxDEV(l,{variant:"overline",display:"block",color:"text.secondary",children:"Aktyorlar"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:260,columnNumber:34},void 0),e.jsxDEV(l,{variant:"body2",children:s.Actors},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:261,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:259,columnNumber:29},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:216,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:196,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:182,columnNumber:13},void 0)},I=()=>!s||s.Response!=="True"||!i?null:e.jsxDEV(oe,{elevation:u?0:3,sx:{p:{xs:2,sm:3},mt:3,bgcolor:"background.paper",borderRadius:u?0:2},children:[e.jsxDEV(l,{variant:"h6",component:"h2",gutterBottom:!0,children:"Şərhlər"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:280,columnNumber:17},void 0),e.jsxDEV(R,{sx:{mb:2}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:283,columnNumber:17},void 0),e.jsxDEV(v,{sx:{mb:3},children:[e.jsxDEV(l,{variant:"subtitle1",component:"h3",gutterBottom:!0,sx:{fontWeight:"medium"},children:"Şərhinizi Bildirin"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:286,columnNumber:22},void 0),e.jsxDEV(de,{movieId:i,onCommentAdded:c},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:289,columnNumber:22},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:285,columnNumber:17},void 0),e.jsxDEV(R,{sx:{mb:2}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:295,columnNumber:17},void 0),e.jsxDEV(Oe,{movieId:i,refreshKey:h},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:297,columnNumber:18},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:274,columnNumber:13},void 0);return e.jsxDEV(ie,{maxWidth:"lg",sx:{mt:{xs:0,sm:2},mb:4},children:[e.jsxDEV(v,{sx:{display:{xs:"flex",sm:"none"},alignItems:"center",p:1.5,bgcolor:"background.paper"},children:[e.jsxDEV(F,{onClick:n,size:"small",sx:{mr:1},children:e.jsxDEV(H,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:305,columnNumber:80},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:305,columnNumber:17},void 0),e.jsxDEV(l,{variant:"h6",noWrap:!0,children:r?"Yüklənir...":(s==null?void 0:s.Title)||"Film Detalları"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:306,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:304,columnNumber:13},void 0),r&&N(),f&&d(),!r&&!f&&s&&e.jsxDEV(v,{children:[y(),I()]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:312,columnNumber:18},void 0),!r&&!f&&!s&&d()]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:303,columnNumber:9},void 0)};export{ss as default};
