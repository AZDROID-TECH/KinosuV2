import{t as g,d as M,u as te,b as n,j as e,c as r,L as $,B as v,A as Y,g as I,C as B,e as ne,aD as ae,al as ce,T as W,I as F,at as ve,Z as fe,f as se,P as ie,G as P,U as De,am as R,a4 as _}from"./index-CRA6_osR.js";import{c as xe,f as he,l as Ne,v as be,d as pe,e as Me,h as Ce}from"./index-BUy9bP0J.js";import{b as ge,a as me,s as G}from"./toastHelper-Dhu-gvGD.js";import{L as re}from"./Link-CLgDQ3nV.js";import{T as ze}from"./TextField-C5oxrvYs.js";import{C as je}from"./ConfirmationDialog-ClZsGObl.js";import"./DialogTitle-BipdMIKu.js";import"./DialogActions-2T0SPT2s.js";const Ee=g([M.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),M.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),U=g(M.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),Ve=g(M.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),Ke=g(M.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline"),ye=g(M.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline"),ke=g(M.jsx("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply"),Ie=g(M.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),Le=g(M.jsx("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m4 0v12h4V3z"}),"ThumbDown"),Ae=g(M.jsx("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m0 12-4.34 4.34L12 14H3v-2l3-7h9zm4-12h4v12h-4z"}),"ThumbDownOutlined"),we=g(M.jsx("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp"),Se=g(M.jsx("path",{d:"M9 21h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.58 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2M9 9l4.34-4.34L12 10h9v2l-3 7H9zM1 9h4v12H1z"}),"ThumbUpOutlined"),oe={"movie-poster":"_movie-poster_xef9j_3","genre-chip":"_genre-chip_xef9j_13"},le=({movieId:i,parentId:N=null,onCommentAdded:u,placeholder:s="Şərhinizi yazın...",buttonText:z="Göndər",variant:m="filled",showCancelButton:D=!1,onCancel:f})=>{const{isLoggedIn:l}=te(),[V,K]=n.useState(""),[b,C]=n.useState(!1),[t,c]=n.useState(null),h=async d=>{var k,o;if(d.preventDefault(),!V.trim()||!l)return;C(!0),c(null);const y={content:V,movieId:i,parentId:N};try{await xe(y),N?ge("Cavabınız təsdiq üçün göndərildi."):me("Şərhiniz təsdiq üçün göndərildi və admin tərəfindən yoxlanılır!"),K(""),c(null),u&&u(),D&&f&&f()}catch(a){console.error("Yorum gönderme hatası:",a);let x="Şərh göndərilərkən xəta baş verdi.";typeof a=="string"?x=a:(o=(k=a==null?void 0:a.response)==null?void 0:k.data)!=null&&o.error?x=a.response.data.error:a!=null&&a.message&&(x=a.message),x.includes("uuid")&&(x="Sistem xətası: Texniki dəstəklə əlaqə saxlayın."),c(x),G(x)}finally{C(!1)}};return l?e.jsxDEV(v,{component:"form",onSubmit:h,sx:{mt:N?1:2},children:[e.jsxDEV(ze,{fullWidth:!0,multiline:!0,rows:N?2:3,variant:m,label:s,value:V,onChange:d=>K(d.target.value),disabled:b,required:!0,sx:{mb:1,bgcolor:m==="filled"?"action.hover":void 0},InputProps:{disableUnderline:m==="filled"}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:99,columnNumber:13},void 0),t&&e.jsxDEV(Y,{severity:"error",sx:{mb:1},children:t},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:113,columnNumber:17},void 0),e.jsxDEV(v,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[D&&e.jsxDEV(I,{variant:"text",onClick:f,disabled:b,size:"small",children:"Ləğv et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:117,columnNumber:21},void 0),e.jsxDEV(I,{type:"submit",variant:"contained",disabled:b||!V.trim(),size:"small",startIcon:b?e.jsxDEV(B,{size:16,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:131,columnNumber:44},void 0):null,children:z},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:126,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:115,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:98,columnNumber:9},void 0):e.jsxDEV(r,{variant:"body2",color:"text.secondary",children:["Şərh yazmaq üçün ",e.jsxDEV(re,{component:$,to:"/login",children:"daxil olun"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:94,columnNumber:84},void 0),"."]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentForm.tsx",lineNumber:94,columnNumber:16},void 0)},Te=({comment:i,movieId:N,onVoteChange:u,onReplyAdded:s,onDelete:z,level:m=0})=>{var q,Q,X,Z,J,ee;const{isLoggedIn:D,isAdmin:f,userId:l}=te(),V=ne(),[K,b]=n.useState(!1),[C,t]=n.useState(!1),[c,h]=n.useState(!1),[d,y]=ae.useState(null),[k,o]=n.useState(!1),a=p=>{try{return he(new Date(p),{addSuffix:!0,locale:Ne})}catch(L){return console.error("Date formatting error:",L),p}},x=l!==null&&l===i.user_id,w=async p=>{if(!D||C||x)return;t(!0);const L=i.likes,H=i.dislikes,A=i.user_vote;let S=L,T=H,O=null;A===p?(O=null,p==="like"?S--:T--):(O=p,p==="like"?(S++,A==="dislike"&&T--):(T++,A==="like"&&S--)),u(i.id,S,T,O);try{const E=await be(i.id,{voteType:p});if(E&&typeof E.likes=="number"&&typeof E.dislikes=="number"){const ue=E.user_vote;u(i.id,E.likes,E.dislikes,ue)}else console.warn("Backend'den səs məlumatları düzgün formatda gəlmədi."),u(i.id,L,H,A??null)}catch(E){G((E==null?void 0:E.message)||"Oy verərkən xəta baş verdi."),u(i.id,L,H,A??null)}finally{t(!1)}},j=()=>{o(!0)},de=async()=>{if(!(!f||c)){h(!0);try{await pe(i.id),me("Şərh silindi."),o(!1),z(i.id)}catch(p){G((p==null?void 0:p.message)||"Şərh silinərkən xəta baş verdi."),o(!1)}finally{h(!1)}}};return e.jsxDEV(v,{sx:{display:"flex",gap:2,py:2,px:m>0?1:0,ml:m*(m>1?3:4),borderLeft:m>0?`2px solid ${V.palette.divider}`:"none",pl:m>0?2:0,position:"relative"},children:[e.jsxDEV(ce,{component:$,to:`/user/username/${(q=i.author)==null?void 0:q.username}`,src:((Q=i.author)==null?void 0:Q.avatar_url)||"",alt:((X=i.author)==null?void 0:X.username)||"Anonim",sx:{width:36,height:36,mt:.5}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:146,columnNumber:13},void 0),e.jsxDEV(v,{sx:{flexGrow:1},children:[e.jsxDEV(v,{sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsxDEV(re,{component:$,to:`/user/username/${(Z=i.author)==null?void 0:Z.username}`,underline:"hover",color:"primary.main",sx:{fontWeight:"medium",mr:1,fontSize:"0.9rem"},children:((J=i.author)==null?void 0:J.username)||"Anonim"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:155,columnNumber:21},void 0),e.jsxDEV(r,{variant:"caption",color:"text.secondary",children:a(i.created_at)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:164,columnNumber:21},void 0),f&&e.jsxDEV(W,{title:"Şərhi sil",arrow:!0,children:e.jsxDEV(F,{size:"small",onClick:j,disabled:c,sx:{ml:"auto"},color:"error",children:c?e.jsxDEV(B,{size:16,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:177,columnNumber:50},void 0):e.jsxDEV(Ke,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:177,columnNumber:98},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:170,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:169,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:154,columnNumber:17},void 0),e.jsxDEV(r,{variant:"body2",sx:{mb:1},children:i.content},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:182,columnNumber:17},void 0),e.jsxDEV(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxDEV(W,{title:x?"Öz şərhinizə səs verə bilməzsiniz":"Bəyən",arrow:!0,placement:"top",children:e.jsxDEV("span",{children:e.jsxDEV(F,{size:"small",onClick:()=>w("like"),disabled:!D||C||x,color:i.user_vote==="like"?"primary":"default",children:i.user_vote==="like"?e.jsxDEV(we,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:194,columnNumber:66},void 0):e.jsxDEV(Se,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:194,columnNumber:96},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:187,columnNumber:30},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:186,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:185,columnNumber:21},void 0),e.jsxDEV(r,{variant:"caption",sx:{fontWeight:500,minWidth:"1.5em"},children:i.likes},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:198,columnNumber:21},void 0),e.jsxDEV(W,{title:x?"Öz şərhinizə səs verə bilməzsiniz":"Bəyənmə",arrow:!0,placement:"top",children:e.jsxDEV("span",{children:e.jsxDEV(F,{size:"small",onClick:()=>w("dislike"),disabled:!D||C||x,color:i.user_vote==="dislike"?"error":"default",children:i.user_vote==="dislike"?e.jsxDEV(Le,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:210,columnNumber:69},void 0):e.jsxDEV(Ae,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:210,columnNumber:101},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:203,columnNumber:30},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:202,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:201,columnNumber:21},void 0),e.jsxDEV(r,{variant:"caption",sx:{fontWeight:500,minWidth:"1.5em"},children:i.dislikes},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:214,columnNumber:21},void 0),m<3&&D&&e.jsxDEV(I,{size:"small",startIcon:e.jsxDEV(ke,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:221,columnNumber:40},void 0),onClick:()=>b(!K),sx:{ml:1,textTransform:"none"},children:K?"Ləğv et":"Cavabla"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:219,columnNumber:26},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:183,columnNumber:17},void 0),K&&e.jsxDEV(le,{movieId:N,parentId:i.id,onCommentAdded:()=>{b(!1),s()},placeholder:`${((ee=i.author)==null?void 0:ee.username)||"Anonim"} adlı istifadəçiyə cavab ver...`,buttonText:"Cavab Göndər",variant:"standard",showCancelButton:!0,onCancel:()=>b(!1)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:231,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:153,columnNumber:13},void 0),e.jsxDEV(je,{open:k,onClose:()=>o(!1),onConfirm:de,title:"Şərh Silmə Təsdiqi",message:e.jsxDEV(e.Fragment,{children:["Bu şərhi silmək istədiyinizə əminsinizmi? ",e.jsxDEV("br",{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:252,columnNumber:67},void 0),e.jsxDEV(r,{variant:"caption",color:"text.secondary",children:['"',e.jsxDEV("i",{children:[i.content.substring(0,50),i.content.length>50?"...":""]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:254,columnNumber:30},void 0),'"']},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:253,columnNumber:25},void 0)," ",e.jsxDEV("br",{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:255,columnNumber:39},void 0),"Bu əməliyyat geri alına bilməz."]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:251,columnNumber:21},void 0),confirmText:"Bəli, Sil",cancelText:"Xeyr, Ləğv Et",isLoading:c,confirmButtonColor:"error"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:245,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentItem.tsx",lineNumber:134,columnNumber:9},void 0)},Re={"comment-list-container":"_comment-list-container_1a0h2_3"},_e=({movieId:i,refreshKey:N})=>{const[u,s]=n.useState([]),[z,m]=n.useState(!0),[D,f]=n.useState(null),l=n.useCallback(async()=>{m(!0),f(null);try{const t=await Me(i);s(t)}catch(t){f((t==null?void 0:t.message)||"Şərhlər yüklənərkən xəta baş verdi.")}finally{m(!1)}},[i]);n.useEffect(()=>{l()},[l,N]);const V=n.useCallback((t,c,h,d)=>{s(y=>y.map(o=>o.id===t?{...o,likes:c,dislikes:h,user_vote:d}:o))},[]),K=n.useCallback(t=>{s(c=>c.filter(h=>h.id!==t))},[]),b=n.useCallback(()=>{l()},[l]),C=(t,c=null,h=0)=>t.filter(d=>d.parent_comment_id===c).sort((d,y)=>new Date(y.created_at).getTime()-new Date(d.created_at).getTime()).map(d=>e.jsxDEV(ae.Fragment,{children:[e.jsxDEV(Te,{comment:d,movieId:i,onVoteChange:V,onReplyAdded:b,onDelete:K,level:h},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:80,columnNumber:21},void 0),C(t,d.id,h+1)]},d.id,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:79,columnNumber:17},void 0));return z?e.jsxDEV(v,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:3},children:[e.jsxDEV(B,{size:24,sx:{mr:1}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:100,columnNumber:17},void 0),e.jsxDEV(r,{variant:"body2",color:"text.secondary",children:"Şərhlər yüklənir..."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:101,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:99,columnNumber:13},void 0):D?e.jsxDEV(Y,{severity:"warning",sx:{mt:2},children:[D,e.jsxDEV(I,{size:"small",onClick:l,sx:{ml:1},children:"Yenidən cəhd et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:110,columnNumber:18},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:108,columnNumber:13},void 0):e.jsxDEV(v,{className:Re["comment-list-container"],sx:{mt:0},children:u.length===0?e.jsxDEV(r,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:3},children:"Hələ heç bir şərh yoxdur."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:118,columnNumber:18},void 0):C(u)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Comments/CommentList.tsx",lineNumber:116,columnNumber:9},void 0)},Ge=()=>{const{movieId:i}=ve(),N=ne(),u=fe(N.breakpoints.down("sm")),[s,z]=n.useState(null),[m,D]=n.useState(!0),[f,l]=n.useState(null),[V,K]=n.useState(""),[b,C]=n.useState(0);n.useEffect(()=>{let o=!0;return(async()=>{if(!i){o&&(l("Film ID tapılmadı."),D(!1));return}const w=`https://www.omdbapi.com/?i=${i}&apikey=b567a8f1&plot=full`;o&&(D(!0),l(null),z(null));try{const j=await Ce.get(w);j.data&&j.data.Response==="True"?o&&(z(j.data),l(null)):(console.error("OMDb API xətası:",j.data.Error),l(j.data.Error||"Film tapılmadı və ya API xətası."),z(null))}catch(j){console.error("OMDb API çağırışı zamanı xəta:",j),o&&(l(j.message||"Film detalları yüklənərkən bir xəta baş verdi."),z(null))}finally{o&&D(!1)}})(),()=>{o=!1}},[i]);const t=()=>{window.history.back()},c=()=>{C(o=>o+1)},h=()=>e.jsxDEV(v,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:[e.jsxDEV(B,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:154,columnNumber:13},void 0),e.jsxDEV(r,{sx:{ml:2},children:"Film Detalları Yüklənir..."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:155,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:153,columnNumber:9},void 0),d=()=>e.jsxDEV(se,{maxWidth:"sm",sx:{mt:4,textAlign:"center"},children:[e.jsxDEV(Y,{severity:"error",icon:e.jsxDEV(ye,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:161,columnNumber:44},void 0),variant:"outlined",sx:{mb:2,justifyContent:"center"},children:f||"Bilinməyən bir xəta baş verdi."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:161,columnNumber:14},void 0),e.jsxDEV(I,{variant:"outlined",startIcon:e.jsxDEV(U,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:164,columnNumber:52},void 0),onClick:t,children:"Geri Qayıt"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:164,columnNumber:14},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:160,columnNumber:9},void 0),y=()=>{if(!s||s.Response!=="True")return!m&&!f?(l("Film məlumatları düzgün formatda deyil."),d()):null;const o=typeof s.Genre=="string"?s.Genre.split(",").map(a=>a.trim()):[];return e.jsxDEV(ie,{elevation:u?0:3,sx:{p:{xs:2,sm:3,md:4},mt:2,bgcolor:"background.paper",borderRadius:u?0:2},children:[e.jsxDEV(I,{startIcon:e.jsxDEV(U,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:189,columnNumber:32},void 0),onClick:t,sx:{mb:2,display:{xs:"none",sm:"inline-flex"}},children:"Geri"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:188,columnNumber:17},void 0),e.jsxDEV(P,{container:!0,spacing:{xs:3,md:4},children:[e.jsxDEV(P,{item:!0,xs:12,sm:4,md:3,sx:{textAlign:"center"},children:e.jsxDEV(De,{component:"img",image:s.Poster!=="N/A"?s.Poster:"/placeholder-image.png",alt:`${s.Title} posteri`,className:oe["movie-poster"],sx:{borderRadius:2,width:"100%",maxWidth:{xs:"200px",sm:"100%"},height:"auto",objectFit:"cover",mb:2,boxShadow:`0 4px 12px ${N.palette.mode==="dark"?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.15)"}`,display:"inline-block"}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:198,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:197,columnNumber:21},void 0),e.jsxDEV(P,{item:!0,xs:12,sm:8,md:9,children:[e.jsxDEV(r,{variant:u?"h5":"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:s.Title||"Başlıq Yoxdur"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:217,columnNumber:25},void 0),e.jsxDEV(v,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:{xs:1,sm:1.5},mb:2.5},children:[s.Year&&s.Year!=="N/A"&&e.jsxDEV(R,{icon:e.jsxDEV(Ve,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:227,columnNumber:80},void 0),label:s.Year,variant:"outlined",size:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:227,columnNumber:68},void 0),s.Runtime&&s.Runtime!=="N/A"&&e.jsxDEV(R,{icon:e.jsxDEV(Ee,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:228,columnNumber:86},void 0),label:s.Runtime,variant:"outlined",size:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:228,columnNumber:74},void 0),s.imdbRating&&s.imdbRating!=="N/A"&&e.jsxDEV(R,{icon:e.jsxDEV(Ie,{sx:{color:"#f5c518"}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:229,columnNumber:92},void 0),label:`IMDb: ${s.imdbRating}`,variant:"outlined",size:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:229,columnNumber:80},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:226,columnNumber:25},void 0),o.length>0&&o[0]!=="N/A"&&e.jsxDEV(v,{sx:{display:"flex",flexWrap:"wrap",gap:.8,mb:3},children:o.map(a=>e.jsxDEV(R,{label:a,size:"small",className:oe["genre-chip"],sx:{bgcolor:N.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",color:"text.secondary",fontWeight:500}},a,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:235,columnNumber:37},void 0))},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:233,columnNumber:30},void 0),e.jsxDEV(_,{sx:{mb:2.5}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:244,columnNumber:25},void 0),e.jsxDEV(r,{variant:"h6",gutterBottom:!0,children:"Məzmun"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:246,columnNumber:25},void 0),e.jsxDEV(r,{variant:"body1",paragraph:!0,sx:{color:"text.secondary"},children:s.Plot&&s.Plot!=="N/A"?s.Plot:"Məzmun məlumatı mövcud deyil."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:247,columnNumber:25},void 0),(s.Director&&s.Director!=="N/A"||s.Actors&&s.Actors!=="N/A")&&e.jsxDEV(_,{sx:{my:3}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:251,columnNumber:116},void 0),s.Director&&s.Director!=="N/A"&&e.jsxDEV(v,{sx:{mb:1.5},children:[e.jsxDEV(r,{variant:"overline",display:"block",color:"text.secondary",children:"Rejissor"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:254,columnNumber:33},void 0),e.jsxDEV(r,{variant:"body2",children:s.Director},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:255,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:253,columnNumber:29},void 0),s.Actors&&s.Actors!=="N/A"&&e.jsxDEV(v,{children:[e.jsxDEV(r,{variant:"overline",display:"block",color:"text.secondary",children:"Aktyorlar"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:260,columnNumber:34},void 0),e.jsxDEV(r,{variant:"body2",children:s.Actors},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:261,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:259,columnNumber:29},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:216,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:196,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:182,columnNumber:13},void 0)},k=()=>!s||s.Response!=="True"||!i?null:e.jsxDEV(ie,{elevation:u?0:3,sx:{p:{xs:2,sm:3},mt:3,bgcolor:"background.paper",borderRadius:u?0:2},children:[e.jsxDEV(r,{variant:"h6",component:"h2",gutterBottom:!0,children:"Şərhlər"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:280,columnNumber:17},void 0),e.jsxDEV(_,{sx:{mb:2}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:283,columnNumber:17},void 0),e.jsxDEV(v,{sx:{mb:3},children:[e.jsxDEV(r,{variant:"subtitle1",component:"h3",gutterBottom:!0,sx:{fontWeight:"medium"},children:"Şərhinizi Bildirin"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:286,columnNumber:22},void 0),e.jsxDEV(le,{movieId:i,onCommentAdded:c},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:289,columnNumber:22},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:285,columnNumber:17},void 0),e.jsxDEV(_,{sx:{mb:2}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:295,columnNumber:17},void 0),e.jsxDEV(_e,{movieId:i,refreshKey:b},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:297,columnNumber:18},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:274,columnNumber:13},void 0);return e.jsxDEV(se,{maxWidth:"lg",sx:{mt:{xs:0,sm:2},mb:4},children:[e.jsxDEV(v,{sx:{display:{xs:"flex",sm:"none"},alignItems:"center",p:1.5,bgcolor:"background.paper"},children:[e.jsxDEV(F,{onClick:t,size:"small",sx:{mr:1},children:e.jsxDEV(U,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:305,columnNumber:80},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:305,columnNumber:17},void 0),e.jsxDEV(r,{variant:"h6",noWrap:!0,children:m?"Yüklənir...":(s==null?void 0:s.Title)||"Film Detalları"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:306,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:304,columnNumber:13},void 0),m&&h(),f&&d(),!m&&!f&&s&&e.jsxDEV(v,{children:[y(),k()]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:312,columnNumber:18},void 0),!m&&!f&&!s&&d()]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/MovieDetails/MovieDetails.tsx",lineNumber:303,columnNumber:9},void 0)};export{Ge as default};
