import{ag as u,j as e,a as A,a2 as B,e as T,r as j,d as v,b as _,B as n,g as t,T as s,aC as Y,F as p,S as x,c as k,a4 as b,v as E,aD as H}from"./index-BpWeeXno.js";import{G as m}from"./Grid-BYpl_fwb.js";import{C as h,a as w}from"./CardContent-Bf277MNw.js";import{I as L,V as D}from"./Visibility-G43nY_ua.js";import{C as F}from"./CardHeader-BRImaqoD.js";import{C as N}from"./CalendarToday-CrFuFleB.js";import{P as V}from"./Pagination-DC9BF6dP.js";const O=u(e.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),G=u(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),X=u(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),re=()=>{const r=A(),{darkMode:d}=B(),C=T(),[o,c]=j.useState({newsletters:[],loading:!0,error:null,currentPage:1,totalPages:1});v(r.breakpoints.down("sm")),v(r.breakpoints.down("md"));const g=async(a=1)=>{c(i=>({...i,loading:!0,error:null}));try{const i=await Y(a,8);i.success?c({newsletters:i.data,loading:!1,error:null,currentPage:i.currentPage||1,totalPages:i.totalPages||1}):c(l=>({...l,loading:!1,error:"Yenilikləri yükləmək mümkün olmadı"}))}catch{c(l=>({...l,loading:!1,error:"Yenilikləri yükləmək mümkün olmadı"}))}},S=(a,i)=>{i!==o.currentPage&&(window.scrollTo({top:0,behavior:"smooth"}),g(i))},$=a=>{C(`/newsletters/${a}`)};j.useEffect(()=>{g()},[]);const z=a=>H(new Date(a),"dd MMMM yyyy"),W=(a,i=180)=>{const l=a.replace(/<[^>]*>?/gm,"");return l.length<=i?l:l.substring(0,i)+"..."},I=()=>e.jsx(p,{in:o.loading,children:e.jsx(m,{container:!0,spacing:3,children:Array.from(new Array(4)).map((a,i)=>e.jsx(m,{item:!0,xs:12,md:6,children:e.jsxs(h,{sx:{height:"100%",boxShadow:r.shadows[2],borderRadius:2,overflow:"hidden",border:`1px solid ${t(r.palette.divider,.1)}`,transition:"all 0.3s ease"},children:[e.jsxs(n,{sx:{p:2,background:d?`linear-gradient(135deg, ${t(r.palette.primary.dark,.15)} 0%, ${t(r.palette.background.paper,.05)} 100%)`:`linear-gradient(135deg, ${t(r.palette.primary.light,.2)} 0%, ${t(r.palette.background.paper,.02)} 100%)`},children:[e.jsx(x,{variant:"rectangular",height:32,width:"70%",sx:{mb:1,borderRadius:1}}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(x,{variant:"rectangular",height:20,width:"30%",sx:{borderRadius:1}}),e.jsx(x,{variant:"rectangular",height:20,width:"30%",sx:{borderRadius:1}})]})]}),e.jsxs(w,{children:[e.jsx(x,{variant:"rectangular",height:20,sx:{mb:1,borderRadius:1}}),e.jsx(x,{variant:"rectangular",height:20,sx:{mb:1,borderRadius:1}}),e.jsx(x,{variant:"rectangular",height:20,width:"80%",sx:{mb:1,borderRadius:1}})]})]})},i))})}),R=()=>e.jsx(p,{in:!!o.error,children:e.jsxs(h,{elevation:3,sx:{p:{xs:3,md:4},mt:4,textAlign:"center",bgcolor:t(r.palette.error.main,.05),borderRadius:2,border:`1px solid ${t(r.palette.error.main,.2)}`,maxWidth:700,mx:"auto",transition:"all 0.3s ease"},children:[e.jsxs(n,{sx:{mb:3},children:[e.jsx(G,{color:"error",sx:{fontSize:50,mb:2}}),e.jsx(s,{color:"error",variant:"h5",gutterBottom:!0,fontWeight:"bold",children:o.error}),e.jsx(s,{color:"text.secondary",variant:"body1",sx:{mb:3},children:"Yeniliklərə dair məlumatları yükləyərkən xəta baş verdi. Zəhmət olmasa internet bağlantınızı yoxlayıb yenidən cəhd edin."})]}),e.jsx(k,{variant:"contained",color:"primary",onClick:()=>g(),startIcon:e.jsx(X,{}),sx:{px:3,py:1,borderRadius:2,boxShadow:r.shadows[3],transition:"transform 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:r.shadows[6]}},children:"Yenidən cəhd et"})]})}),P=()=>e.jsx(p,{in:!o.loading&&!o.error&&o.newsletters.length===0,children:e.jsx(h,{elevation:3,sx:{p:{xs:3,md:4},mt:4,textAlign:"center",bgcolor:t(r.palette.info.main,.05),borderRadius:2,border:`1px solid ${t(r.palette.info.main,.2)}`,maxWidth:700,mx:"auto",transition:"all 0.3s ease"},children:e.jsxs(n,{sx:{mb:3},children:[e.jsx(L,{color:"info",sx:{fontSize:50,mb:2}}),e.jsx(s,{color:"info.main",variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Yenilik tapılmadı"}),e.jsx(s,{color:"text.secondary",variant:"body1",sx:{mb:2},children:"Hal-hazırda heç bir yenilik yoxdur. Zəhmət olmasa daha sonra yenidən yoxlayın."})]})})}),M=()=>e.jsx(p,{in:!o.loading&&!o.error&&o.newsletters.length>0,children:e.jsxs(n,{children:[e.jsx(m,{container:!0,spacing:3,children:o.newsletters.map(a=>{var i,l,f,y;return e.jsx(m,{item:!0,xs:12,md:6,children:e.jsxs(h,{onClick:()=>$(a.id),sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease",boxShadow:r.shadows[2],borderRadius:2,overflow:"hidden",border:`1px solid ${t(r.palette.divider,d?.1:.05)}`,position:"relative","&:hover":{boxShadow:`0 8px 16px ${t(r.palette.common.black,d?.25:.1)}`,transform:"translateY(-4px)"}},children:[a.is_important&&e.jsx(n,{sx:{position:"absolute",top:0,right:0,bgcolor:r.palette.error.main,color:"#fff",px:{xs:1.5,md:2},py:.5,borderBottomLeftRadius:8,fontWeight:"bold",fontSize:{xs:"0.7rem",md:"0.8rem"},zIndex:10,boxShadow:`0 2px 4px ${t(r.palette.error.main,.5)}`,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Vacib"}),e.jsx(F,{sx:{p:2,pb:1.5,background:d?`linear-gradient(135deg, ${t(a.is_important?r.palette.error.dark:r.palette.primary.dark,.15)} 0%, ${t(r.palette.background.paper,.05)} 100%)`:`linear-gradient(135deg, ${t(a.is_important?r.palette.error.light:r.palette.primary.light,.15)} 0%, ${t(r.palette.background.paper,.02)} 100%)`,borderBottom:`1px solid ${t(r.palette.divider,.05)}`},title:e.jsx(s,{variant:"h6",sx:{fontWeight:700,fontSize:{xs:"1.05rem",md:"1.15rem"},color:a.is_important?r.palette.error.main:r.palette.primary.main,lineHeight:1.3,mb:1,transition:"color 0.2s",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:a.title})}),e.jsxs(w,{sx:{p:2,pt:1.5},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:1},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(b,{src:(i=a.author)==null?void 0:i.avatar_url,alt:(l=a.author)==null?void 0:l.username,sx:{width:24,height:24,bgcolor:t(r.palette.primary.main,.1),color:r.palette.primary.main},children:(f=a.author)!=null&&f.username?a.author.username.charAt(0).toUpperCase():"S"}),e.jsx(s,{variant:"caption",sx:{color:r.palette.text.secondary,fontWeight:500},children:(y=a.author)==null?void 0:y.username})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(b,{sx:{width:24,height:24,bgcolor:t(r.palette.info.main,.1),color:r.palette.info.main},children:e.jsx(N,{sx:{fontSize:14}})}),e.jsx(s,{variant:"caption",sx:{fontWeight:500,color:t(r.palette.text.secondary,.9)},children:z(a.created_at)})]})]}),e.jsx(s,{variant:"body2",sx:{color:r.palette.text.secondary,height:"4.8em",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",mb:1},children:W(a.content)}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pt:1},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(b,{sx:{width:24,height:24,bgcolor:t(r.palette.success.main,.1),color:r.palette.success.main},children:e.jsx(D,{sx:{fontSize:14}})}),e.jsxs(s,{variant:"caption",sx:{color:t(r.palette.text.secondary,.8),fontWeight:500,fontSize:"0.75rem"},children:[a.view_count||0," görüntülənmə"]})]}),e.jsx(E,{title:"Davamını oxu",children:e.jsx(k,{size:"small",endIcon:e.jsx(O,{}),sx:{color:a.is_important?r.palette.error.main:r.palette.primary.main,fontWeight:600,fontSize:"0.8rem",p:0,minWidth:"auto","&:hover":{backgroundColor:"transparent",transform:"translateX(2px)"}},children:"Davamını oxu"})})]})]})]})},a.id)})}),o.totalPages>1&&e.jsx(n,{sx:{display:"flex",justifyContent:"center",mt:5,mb:3},children:e.jsx(V,{count:o.totalPages,page:o.currentPage,onChange:S,color:"primary",variant:"outlined",shape:"rounded",size:"large",sx:{"& .MuiPaginationItem-root":{fontWeight:600,transition:"all 0.2s"},"& .MuiPaginationItem-root.Mui-selected":{boxShadow:r.shadows[2],backgroundColor:d?t(r.palette.primary.main,.2):t(r.palette.primary.main,.1)}}})})]})});return e.jsxs(_,{maxWidth:"lg",sx:{py:{xs:4,md:6},px:{xs:2,sm:3,md:4}},children:[e.jsx(n,{sx:{mb:{xs:4,md:6},textAlign:"center",position:"relative",pb:4},children:e.jsxs(n,{sx:{background:d?`linear-gradient(135deg, ${t(r.palette.primary.dark,.2)} 0%, ${t(r.palette.background.paper,.05)} 100%)`:`linear-gradient(135deg, ${t(r.palette.primary.light,.2)} 0%, ${t(r.palette.background.paper,.02)} 100%)`,py:{xs:3,md:4},px:{xs:2,md:4},borderRadius:3,mb:4,boxShadow:`0 4px 20px ${t(r.palette.common.black,d?.2:.05)}`,border:`1px solid ${t(r.palette.divider,d?.1:.05)}`},children:[e.jsx(s,{variant:"h2",component:"h1",sx:{fontWeight:800,fontSize:{xs:"2.2rem",sm:"2.5rem",md:"3rem"},mb:2,color:r.palette.text.primary,textShadow:d?"0 2px 4px rgba(0,0,0,0.2)":"none",position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",left:"50%",bottom:-10,height:"4px",width:"80px",borderRadius:"4px",backgroundColor:r.palette.primary.main,transform:"translateX(-50%)"}},children:"Yeniliklər"}),e.jsx(s,{variant:"subtitle1",sx:{maxWidth:"700px",mx:"auto",mb:1,mt:3,lineHeight:1.6,color:t(r.palette.text.primary,.8),fontSize:{xs:"1rem",md:"1.1rem"}},children:"Ən son platformamızla bağlı yenilikləri və elanları burada izləyin"})]})}),e.jsx(n,{sx:{minHeight:"400px"},children:o.loading?I():o.error?R():o.newsletters.length===0?P():M()})]})};export{re as default};
