import{a6 as E,a7 as P,a8 as A,r,s as t,b as a,B as u,C as f,ae as M,P as w,y as m,T as S,L as p,I as D,k as R,ap as q}from"./index-DxgIFdvn.js";import{d as C}from"./OpenInNew-T6Mf-pSG.js";import{a as W,f as L,l as O,b as B,r as H}from"./commentService-DHg4_uA_.js";import{T as F,a as G,b as J,c as j,d as n,e as Y}from"./TableRow-Cmfkx-86.js";import{L as z}from"./Link-DJI4URn2.js";var c={},I=E;Object.defineProperty(c,"__esModule",{value:!0});var K=c.default=void 0,Q=I(P()),U=A();K=c.default=(0,Q.default)((0,U.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline");var g={},X=E;Object.defineProperty(g,"__esModule",{value:!0});var V=g.default=void 0,Z=X(P()),ee=A();V=g.default=(0,Z.default)((0,ee.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff");const oe=()=>{const[x,l]=r.useState([]),[y,h]=r.useState(!0),[v,N]=r.useState(null),[o,d]=r.useState({}),b=r.useCallback(async()=>{h(!0),N(null);try{const e=await W();l(e)}catch(e){const s=e.message||"Şərhlər gətirilərkən xəta baş verdi.";console.error("Gözləyən şərhləri gətirmə xətası:",e),N(s),t(s)}finally{h(!1)}},[]);r.useEffect(()=>{b()},[b]);const _=async e=>{d(s=>({...s,[e]:"approve"}));try{await B(e),R(`Şərh #${e} təsdiq edildi.`),l(s=>s.filter(i=>i.id!==e))}catch(s){const i=s.message||`Şərh #${e} təsdiq edilərkən xəta baş verdi.`;console.error(`Şərh #${e} təsdiq etmə xətası:`,s),t(i)}finally{d(s=>({...s,[e]:!1}))}},T=async e=>{d(s=>({...s,[e]:"reject"}));try{await H(e),q(`Şərh #${e} rədd edildi.`),l(s=>s.filter(i=>i.id!==e))}catch(s){const i=s.message||`Şərh #${e} rədd edilərkən xəta baş verdi.`;console.error(`Şərh #${e} rədd etmə xətası:`,s),t(i)}finally{d(s=>({...s,[e]:!1}))}},$=e=>{try{return L(new Date(e),{addSuffix:!0,locale:O})}catch(s){return console.error("Tarix formatlama xətası:",s),e}},k=()=>y?a.jsxDEV(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:5},children:a.jsxDEV(f,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:104,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:103,columnNumber:17},void 0):v?a.jsxDEV(M,{severity:"error",sx:{mt:2},children:v},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:110,columnNumber:20},void 0):x.length===0?a.jsxDEV(M,{severity:"info",sx:{mt:2},children:"Təsdiq gözləyən şərh yoxdur."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:114,columnNumber:20},void 0):a.jsxDEV(F,{component:w,elevation:2,sx:{mt:2},children:a.jsxDEV(G,{sx:{minWidth:650},"aria-label":"gözləyən şərhlər cədvəli",children:[a.jsxDEV(J,{sx:{backgroundColor:"action.hover"},children:a.jsxDEV(j,{children:[a.jsxDEV(n,{sx:{fontWeight:"bold"},children:"ID"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:122,columnNumber:29},void 0),a.jsxDEV(n,{sx:{fontWeight:"bold"},children:"Yazar"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:123,columnNumber:29},void 0),a.jsxDEV(n,{sx:{fontWeight:"bold"},children:"Şərh"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:124,columnNumber:29},void 0),a.jsxDEV(n,{sx:{fontWeight:"bold"},children:"Film Başlığı"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:125,columnNumber:29},void 0),a.jsxDEV(n,{sx:{fontWeight:"bold"},children:"Tarix"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:126,columnNumber:29},void 0),a.jsxDEV(n,{align:"center",sx:{fontWeight:"bold"},children:"Əməliyyatlar"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:127,columnNumber:29},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:121,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:120,columnNumber:21},void 0),a.jsxDEV(Y,{children:x.map(e=>{var s;return a.jsxDEV(j,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[a.jsxDEV(n,{component:"th",scope:"row",children:e.id},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:137,columnNumber:33},void 0),a.jsxDEV(n,{children:((s=e.author)==null?void 0:s.username)||`İstifadəçi #${e.user_id}`},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:138,columnNumber:33},void 0),a.jsxDEV(n,{children:a.jsxDEV(m,{title:e.content,arrow:!0,children:a.jsxDEV(S,{variant:"body2",noWrap:!0,sx:{maxWidth:"300px"},children:e.content},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:141,columnNumber:42},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:140,columnNumber:37},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:139,columnNumber:33},void 0),a.jsxDEV(n,{children:e.movieTitle?a.jsxDEV(m,{title:`IMDb ID: ${e.movie_imdb_id}`,arrow:!0,children:a.jsxDEV(z,{component:p,to:`/movie/${e.movie_imdb_id}`,target:"_blank",rel:"noopener noreferrer",underline:"hover",sx:{display:"inline-flex",alignItems:"center"},children:[e.movieTitle,a.jsxDEV(C,{sx:{fontSize:"0.9rem",ml:.5,opacity:.6}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:158,columnNumber:49},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:149,columnNumber:45},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:148,columnNumber:41},void 0):a.jsxDEV(z,{component:p,to:`/movie/${e.movie_imdb_id}`,target:"_blank",rel:"noopener noreferrer",underline:"hover",sx:{display:"inline-flex",alignItems:"center"},children:[e.movie_imdb_id,a.jsxDEV(C,{sx:{fontSize:"0.9rem",ml:.5}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:171,columnNumber:45},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:162,columnNumber:41},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:146,columnNumber:33},void 0),a.jsxDEV(n,{children:$(e.created_at)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:175,columnNumber:33},void 0),a.jsxDEV(n,{align:"center",children:a.jsxDEV(u,{sx:{display:"flex",justifyContent:"center",gap:1},children:[a.jsxDEV(m,{title:"Təsdiq Et",children:a.jsxDEV("span",{children:[" ",a.jsxDEV(D,{color:"success",onClick:()=>_(e.id),disabled:!!o[e.id],size:"small",children:o[e.id]==="approve"?a.jsxDEV(f,{size:20,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:186,columnNumber:97},void 0):a.jsxDEV(K,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:186,columnNumber:146},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:180,columnNumber:49},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:179,columnNumber:46},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:178,columnNumber:42},void 0),a.jsxDEV(m,{title:"Rədd Et",children:a.jsxDEV("span",{children:[" ",a.jsxDEV(D,{color:"error",onClick:()=>T(e.id),disabled:!!o[e.id],size:"small",children:o[e.id]==="reject"?a.jsxDEV(f,{size:20,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:198,columnNumber:96},void 0):a.jsxDEV(V,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:198,columnNumber:145},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:192,columnNumber:50},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:191,columnNumber:46},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:190,columnNumber:41},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:177,columnNumber:37},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:176,columnNumber:33},void 0)]},e.id,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:132,columnNumber:29},void 0)})},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:130,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:119,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:118,columnNumber:13},void 0);return a.jsxDEV(u,{sx:{p:{xs:2,sm:3}},children:k()},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/Admin/ManageCommentsPage.tsx",lineNumber:214,columnNumber:9},void 0)};export{oe as default};
