import{a6 as U,a7 as A,a8 as V,a as B,r as n,b as e,D as X,T as w,I as _,i as Y,h as q,B as H,C as $,ae as S,af as _e,ag as Se,ai as $e,y as E,L as Ne,d as T,k as ke,s as Ie,u as ce,am as Re,ab as W,P as Te,an as Le,ao as Oe,e as be}from"./index-DxgIFdvn.js";import{d as we}from"./Person-DJ7qTj7b.js";import{d as We}from"./Delete-DbDNzRVq.js";import{f as He}from"./movieHelpers-DztUmcMh.js";import{d as Be}from"./OpenInNew-T6Mf-pSG.js";import{d as qe}from"./Movie-GtQQeX1y.js";import{d as Fe}from"./CheckCircle-DqlsR72t.js";import{d as Qe}from"./Cancel--M-h7Yct.js";import{g as Ge,f as Je,l as Xe,d as Ye}from"./commentService-DHg4_uA_.js";import{C as Ze}from"./ConfirmationDialog-Cly1o_Im.js";import{D as Z}from"./DialogTitle-HdFSzBsI.js";import{L as es}from"./Link-DJI4URn2.js";import{D as ee}from"./DialogActions-48wRIAmy.js";import{C as G}from"./Chip-83eoYdiA.js";import{T as ss,a as is,b as ns,c as fe,d,e as as}from"./TableRow-Cmfkx-86.js";import{S as he}from"./Stack-D-PMbS4f.js";import{T as ve}from"./TextField-B069WdOT.js";import{D as os}from"./DialogContentText-BcEKOdcA.js";var se={},rs=U;Object.defineProperty(se,"__esModule",{value:!0});var J=se.default=void 0,ds=rs(A()),xe=V();J=se.default=(0,ds.default)([(0,xe.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),(0,xe.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")],"AdminPanelSettings");var ie={},ls=U;Object.defineProperty(ie,"__esModule",{value:!0});var pe=ie.default=void 0,ms=ls(A()),ts=V();pe=ie.default=(0,ms.default)((0,ts.jsx)("path",{d:"m22.27 21.73-3.54-3.55L5.78 5.23 2.27 1.72 1 2.99 3.01 5H3v6c0 5.55 3.84 10.74 9 12 2.16-.53 4.08-1.76 5.6-3.41L21 23zM13 9.92l6.67 6.67C20.51 14.87 21 12.96 21 11V5l-9-4-5.48 2.44L11 7.92z"}),"RemoveModerator");var ne={},us=U;Object.defineProperty(ne,"__esModule",{value:!0});var De=ne.default=void 0,cs=us(A()),fs=V();De=ne.default=(0,cs.default)((0,fs.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var ae={},vs=U;Object.defineProperty(ae,"__esModule",{value:!0});var oe=ae.default=void 0,xs=vs(A()),Ns=V();oe=ae.default=(0,xs.default)((0,Ns.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline");var re={},bs=U;Object.defineProperty(re,"__esModule",{value:!0});var ge=re.default=void 0,hs=bs(A()),ps=V();ge=re.default=(0,hs.default)((0,ps.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var de={},Ds=U;Object.defineProperty(de,"__esModule",{value:!0});var Me=de.default=void 0,gs=Ds(A()),Ms=V();Me=de.default=(0,gs.default)((0,Ms.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");var le={},zs=U;Object.defineProperty(le,"__esModule",{value:!0});var ze=le.default=void 0,js=zs(A()),Es=V();ze=le.default=(0,js.default)((0,Es.jsx)("path",{d:"M17 10H7v2h10zm2-7h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14zm-5-5H7v2h7z"}),"EventNote");var me={},Us=U;Object.defineProperty(me,"__esModule",{value:!0});var je=me.default=void 0,As=Us(A()),Vs=V();je=me.default=(0,As.default)((0,Vs.jsx)("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2zm10 14.5V20H8v-3.5l4-4zm-4-5-4-4V4h8v3.5z"}),"HourglassEmpty");const Ks={pending:{label:"Gözləmədə",icon:e.jsxDEV(je,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:50,columnNumber:42},void 0),color:"warning"},approved:{label:"Təsdiqlənmiş",icon:e.jsxDEV(Fe,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:51,columnNumber:46},void 0),color:"success"},rejected:{label:"İptal edildi",icon:e.jsxDEV(Qe,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:52,columnNumber:46},void 0),color:"error"}},Cs=({open:h,onClose:a,userId:m,username:D})=>{const o=B(),[u,c]=n.useState([]),[x,l]=n.useState(!1),[g,M]=n.useState(null),[K,N]=n.useState(null),[z,C]=n.useState(!1),[r,P]=n.useState(null),k=n.useCallback(async()=>{if(m){l(!0),M(null),c([]);try{const i=await Ge(m);c(i)}catch(i){console.error("İstifadəçi şərhlərini gətirmə xətası:",i),M(i.message||"İstifadəçinin şərhləri gətirilərkən xəta baş verdi.")}finally{l(!1)}}},[m]);n.useEffect(()=>{h&&m&&k(),h||(c([]),M(null),l(!1))},[h,m,k]);const I=i=>{P(i),C(!0)},F=async()=>{if(r){N(r.id);try{await Ye(r.id),ke("Şərh uğurla silindi."),c(i=>i.filter(p=>p.id!==r.id)),C(!1),P(null)}catch(i){Ie(i.message||"Şərh silinərkən xəta baş verdi.")}finally{N(null)}}},y=i=>{try{return Je(new Date(i),{addSuffix:!0,locale:Xe})}catch{return i}},j=i=>{const p=Ks[i]||{label:i,icon:null,color:"default"};return e.jsxDEV(E,{title:`Status: ${p.label}`,children:e.jsxDEV(G,{icon:p.icon,label:p.label,size:"small",color:p.color,variant:"outlined",sx:{ml:1.5,opacity:.85,fontSize:"0.75rem",height:"22px"}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:124,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:123,columnNumber:13},void 0)};return e.jsxDEV(X,{open:h,onClose:a,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:2,height:"85vh"}},children:[e.jsxDEV(Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1,borderBottom:`1px solid ${o.palette.divider}`},children:[e.jsxDEV(w,{variant:"h6",component:"span",children:[e.jsxDEV(oe,{sx:{verticalAlign:"bottom",mr:1,opacity:.8}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:152,columnNumber:21},void 0),e.jsxDEV("strong",{children:D||"İstifadəçi"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:153,columnNumber:21},void 0)," Şərhləri"]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:151,columnNumber:17},void 0),e.jsxDEV(_,{onClick:a,size:"small",children:e.jsxDEV(ge,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:156,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:155,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:144,columnNumber:13},void 0),e.jsxDEV(Y,{dividers:!0,sx:{bgcolor:q(o.palette.action.hover,.2),p:0},children:x?e.jsxDEV(H,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",py:5},children:e.jsxDEV($,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:165,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:164,columnNumber:21},void 0):g?e.jsxDEV(S,{severity:"error",sx:{m:2},children:g},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:168,columnNumber:21},void 0):u.length===0?e.jsxDEV(S,{severity:"info",sx:{m:2},children:"Bu istifadəçinin heç bir şərhi yoxdur."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:170,columnNumber:21},void 0):e.jsxDEV(_e,{disablePadding:!0,children:u.map(i=>e.jsxDEV(Se,{alignItems:"flex-start",secondaryAction:e.jsxDEV(E,{title:"Şərhi sil",children:e.jsxDEV(_,{edge:"end","aria-label":"sil",onClick:()=>I(i),disabled:K===i.id,size:"small",children:K===i.id?e.jsxDEV($,{size:20},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:186,columnNumber:81},void 0):e.jsxDEV(Me,{fontSize:"small",color:"error"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:186,columnNumber:114},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:179,columnNumber:41},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:178,columnNumber:37},void 0),sx:{py:2,px:2.5,borderBottom:`1px solid ${o.palette.divider}`},children:e.jsxDEV($e,{primary:e.jsxDEV(w,{variant:"body2",sx:{mb:1},children:i.content},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:198,columnNumber:41},void 0),secondary:e.jsxDEV(H,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:.5,mt:.5},children:[e.jsxDEV(E,{title:"Film",children:e.jsxDEV(es,{component:Ne,to:`/movie/${i.movie_imdb_id}`,target:"_blank",underline:"hover",color:"text.secondary",sx:{display:"inline-flex",alignItems:"center",mr:1},children:[e.jsxDEV(qe,{sx:{fontSize:"1rem",mr:.5,opacity:.7}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:213,columnNumber:53},void 0),i.movieTitle||i.movie_imdb_id,e.jsxDEV(Be,{sx:{fontSize:"0.8rem",ml:.5,opacity:.7}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:215,columnNumber:53},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:205,columnNumber:49},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:204,columnNumber:45},void 0),e.jsxDEV(E,{title:"Tarix",children:e.jsxDEV(w,{component:"span",variant:"caption",color:"text.secondary",sx:{display:"inline-flex",alignItems:"center"},children:[e.jsxDEV(ze,{sx:{fontSize:"1rem",mr:.5,opacity:.7}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:220,columnNumber:53},void 0),y(i.created_at)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:219,columnNumber:49},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:218,columnNumber:45},void 0),j(i.status)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:203,columnNumber:41},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:196,columnNumber:33},void 0)},i.id,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:174,columnNumber:29},void 0))},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:172,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:159,columnNumber:13},void 0),e.jsxDEV(ee,{sx:{borderTop:`1px solid ${o.palette.divider}`},children:e.jsxDEV(T,{onClick:a,children:"Bağla"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:234,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:233,columnNumber:13},void 0),e.jsxDEV(Ze,{open:z,onClose:()=>C(!1),onConfirm:F,title:"Şərh Silmə Təsdiqi",message:e.jsxDEV(e.Fragment,{children:["Seçilmiş şərhi (",r==null?void 0:r.id,") silmək istədiyinizə əminsinizmi?",e.jsxDEV("br",{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:244,columnNumber:96},void 0),e.jsxDEV(w,{variant:"caption",color:"text.secondary",children:['"',e.jsxDEV("i",{children:[r==null?void 0:r.content.substring(0,50),r!=null&&r.content&&r.content.length>50?"...":""]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:246,columnNumber:30},void 0),'"']},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:245,columnNumber:25},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:248,columnNumber:25},void 0),"Bu əməliyyat geri alına bilməz."]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:243,columnNumber:21},void 0),confirmText:"Bəli, Sil",cancelText:"Xeyr, Ləğv Et",isLoading:!!K,confirmButtonColor:"error"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:237,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:137,columnNumber:9},void 0)},Ps=({open:h,user:a,onClose:m,onSave:D,isSaving:o})=>{const[u,c]=n.useState(""),[x,l]=n.useState(""),g=B(),M=be(g.breakpoints.down("sm"));n.useEffect(()=>{a&&(c(a.username||""),l(a.email||""))},[a]);const K=N=>{if(N.preventDefault(),!a)return;const z={};if(u&&u!==a.username&&(z.username=u),x&&x!==a.email&&(z.email=x),Object.keys(z).length===0){m();return}D(a.id,z)};return e.jsxDEV(X,{open:h,onClose:m,fullScreen:M,PaperProps:{sx:{borderRadius:{xs:0,sm:2},width:{sm:"450px"},maxWidth:"100%"}},children:[e.jsxDEV(Z,{sx:{bgcolor:q(g.palette.secondary.main,.1),pb:1},children:"İstifadəçini Redaktə Et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:105,columnNumber:7},void 0),e.jsxDEV("form",{onSubmit:K,children:[e.jsxDEV(Y,{sx:{pt:3},children:e.jsxDEV(he,{spacing:3,children:[e.jsxDEV(ve,{label:"İstifadəçi adı",fullWidth:!0,value:u,onChange:N=>c(N.target.value),autoFocus:!0,InputLabelProps:{shrink:!0},disabled:o},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:111,columnNumber:13},void 0),e.jsxDEV(ve,{label:"E-poçt",type:"email",fullWidth:!0,value:x,onChange:N=>l(N.target.value),InputLabelProps:{shrink:!0},disabled:o},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:120,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:110,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:109,columnNumber:9},void 0),e.jsxDEV(ee,{sx:{px:3,pb:3},children:[e.jsxDEV(T,{onClick:m,color:"inherit",disabled:o,variant:"outlined",children:"Ləğv et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:132,columnNumber:11},void 0),e.jsxDEV(T,{type:"submit",color:"secondary",variant:"contained",disabled:o,sx:{minWidth:"100px"},children:o?e.jsxDEV($,{size:20,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:147,columnNumber:25},void 0):"Saxla"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:131,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:108,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:93,columnNumber:5},void 0)},ys=({open:h,user:a,onClose:m,onConfirm:D,isDeleting:o})=>{const u=B(),c=be(u.breakpoints.down("sm"));return e.jsxDEV(X,{open:h,onClose:m,fullScreen:c,PaperProps:{sx:{borderRadius:{xs:0,sm:2},width:{sm:"450px"},maxWidth:"100%"}},children:[e.jsxDEV(Z,{sx:{bgcolor:q(u.palette.error.main,.1),pb:1,color:u.palette.error.main},children:"İstifadəçini Sil"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:180,columnNumber:7},void 0),e.jsxDEV(Y,{sx:{pt:3},children:e.jsxDEV(os,{children:[e.jsxDEV("strong",{children:a==null?void 0:a.username},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:185,columnNumber:11},void 0)," istifadəçisini silmək istədiyinizə əminsiniz? Bu əməliyyat geri qaytarıla bilməz və istifadəçinin bütün məlumatları silinəcək."]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:184,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:183,columnNumber:7},void 0),e.jsxDEV(ee,{sx:{px:3,pb:3},children:[e.jsxDEV(T,{onClick:m,color:"inherit",disabled:o,variant:"outlined",children:"Ləğv et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:190,columnNumber:9},void 0),e.jsxDEV(T,{onClick:()=>a&&D(a.id),color:"error",variant:"contained",disabled:o,sx:{minWidth:"100px"},children:o?e.jsxDEV($,{size:20,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:205,columnNumber:25},void 0):"Sil"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:198,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:189,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:168,columnNumber:5},void 0)},Ys=()=>{const{username:h,userId:a}=ce(),m=B(),[D,o]=n.useState([]),[u,c]=n.useState(!0),[x,l]=n.useState(null),[g,M]=n.useState(null),[K,N]=n.useState(null),[z,C]=n.useState(!1),[r,P]=n.useState(!1),[k,I]=n.useState(null),[F,y]=n.useState(!1),[j,i]=n.useState(null),[p,te]=n.useState(!1),[L,O]=n.useState(null),{isAdmin:_s}=ce(),{isUserOnline:Ee}=Re(),ue=n.useCallback(async()=>{var s,f;c(!0),l(null);try{const t=await W.getAllUsers();o(t)}catch(t){console.error("İstifadəçi siyahısı alınarkən xəta:",t);const v=((f=(s=t.response)==null?void 0:s.data)==null?void 0:f.error)||t.message||"İstifadəçi siyahısı alınamadı.";l(v),o([])}finally{c(!1)}},[]);n.useEffect(()=>{ue()},[ue]),n.useEffect(()=>{if(L){const s=setTimeout(()=>{O(null)},5e3);return()=>clearTimeout(s)}},[L]);const Ue=async(s,f)=>{var t,v;M(s),l(null);try{await W.setUserAdminStatus(s,!f),o(b=>b.map(R=>R.id===s?{...R,is_admin:!f}:R)),O(`İstifadəçinin admin statusu ${f?"alındı":"verildi"}.`)}catch(b){console.error(`Admin statusu dəyişdirilərkən xəta (ID: ${s}):`,b),l(((v=(t=b.response)==null?void 0:t.data)==null?void 0:v.error)||"Admin statusu yenilənərkən xəta baş verdi.")}finally{M(null)}},Ae=s=>{N(s),C(!0)},Ve=async(s,f)=>{var t,v;P(!0),l(null);try{const b=await W.updateUser(s,f);o(R=>R.map(Q=>Q.id===s?{...Q,...f}:Q)),O("İstifadəçi məlumatları uğurla yeniləndi."),P(!1),C(!1),N(null)}catch(b){console.error(`İstifadəçi məlumatları yenilənərkən xəta (ID: ${s}):`,b),l(((v=(t=b.response)==null?void 0:t.data)==null?void 0:v.error)||"İstifadəçi məlumatları yenilənərkən xəta baş verdi."),P(!1)}},Ke=s=>{I(s),y(!1)},Ce=async s=>{var f,t;y(!0),l(null);try{await W.deleteUser(s),o(v=>v.filter(b=>b.id!==s)),O("İstifadəçi uğurla silindi."),y(!1),I(null)}catch(v){console.error(`İstifadəçi silinərkən xəta (ID: ${s}):`,v),l(((t=(f=v.response)==null?void 0:f.data)==null?void 0:t.error)||"İstifadəçi silinərkən xəta baş verdi."),y(!1)}},Pe=s=>{i(s),te(!0)},ye=()=>u?e.jsxDEV(H,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsxDEV($,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:347,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:346,columnNumber:9},void 0):x?e.jsxDEV(S,{severity:"error",sx:{mt:2},children:x},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:354,columnNumber:9},void 0):D.length===0?e.jsxDEV(S,{severity:"info",sx:{mt:2},children:"Heç bir istifadəçi tapılmadı."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:362,columnNumber:9},void 0):e.jsxDEV(ss,{component:Te,elevation:2,sx:{mt:2},children:e.jsxDEV(is,{sx:{minWidth:750},"aria-label":"istifadəçilər cədvəli",children:[e.jsxDEV(ns,{sx:{backgroundColor:q(m.palette.secondary.main,.1)},children:e.jsxDEV(fe,{children:[e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"ID"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:373,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"Avatar"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:374,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"İstifadəçi adı"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:375,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"E-poçt"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:376,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"Status"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:377,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"Qoşulma Tarixi"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:378,columnNumber:15},void 0),e.jsxDEV(d,{align:"center",sx:{fontWeight:"bold"},children:"Şərhlər"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:379,columnNumber:15},void 0),e.jsxDEV(d,{align:"center",sx:{fontWeight:"bold"},children:"Əməliyyatlar"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:380,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:372,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:371,columnNumber:11},void 0),e.jsxDEV(as,{children:D.map(s=>e.jsxDEV(fe,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[e.jsxDEV(d,{component:"th",scope:"row",children:s.id},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:390,columnNumber:17},void 0),e.jsxDEV(d,{children:e.jsxDEV(Le,{src:s.avatar_url||void 0,alt:s.username,size:36,isOnline:Ee(s.id)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:392,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:391,columnNumber:17},void 0),e.jsxDEV(d,{sx:{fontWeight:"medium"},children:e.jsxDEV(Ne,{to:`/user/${s.id}`,style:{color:"inherit",textDecoration:"none",fontWeight:"inherit"},children:s.username},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:400,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:399,columnNumber:17},void 0),e.jsxDEV(d,{children:s.email||"-"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:411,columnNumber:17},void 0),e.jsxDEV(d,{children:s.is_admin?e.jsxDEV(G,{icon:e.jsxDEV(J,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:415,columnNumber:29},void 0),label:"Admin",color:"secondary",size:"small",variant:"outlined"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:414,columnNumber:21},void 0):e.jsxDEV(G,{icon:e.jsxDEV(we,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:423,columnNumber:29},void 0),label:"İstifadəçi",size:"small",variant:"outlined"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:422,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:412,columnNumber:17},void 0),e.jsxDEV(d,{children:He(s.created_at)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:430,columnNumber:17},void 0),e.jsxDEV(d,{align:"center",children:e.jsxDEV(E,{title:"İstifadəçi şərhlərini göstər",children:e.jsxDEV(_,{onClick:()=>Pe(s),color:"primary",size:"small",children:e.jsxDEV(Oe,{badgeContent:s.comment_count||0,color:"primary",max:99,children:e.jsxDEV(oe,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:443,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:438,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:433,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:432,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:431,columnNumber:17},void 0),e.jsxDEV(d,{align:"center",children:e.jsxDEV(he,{direction:"row",spacing:.5,justifyContent:"center",children:[e.jsxDEV(E,{title:"İstifadəçini redaktə et",children:e.jsxDEV(_,{onClick:()=>Ae(s),color:"primary",size:"small",children:e.jsxDEV(De,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:456,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:451,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:450,columnNumber:21},void 0),e.jsxDEV(E,{title:s.is_admin?"Admin statusunu ləğv et":"Admin təyin et",children:e.jsxDEV(_,{onClick:()=>Ue(s.id,s.is_admin),color:s.is_admin?"default":"secondary",size:"small",disabled:g===s.id||s.id===a,children:g===s.id?e.jsxDEV($,{size:20},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:468,columnNumber:27},void 0):s.is_admin?e.jsxDEV(pe,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:470,columnNumber:27},void 0):e.jsxDEV(J,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:472,columnNumber:27},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:461,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:460,columnNumber:21},void 0),e.jsxDEV(E,{title:"İstifadəçini sil",children:e.jsxDEV(_,{onClick:()=>Ke(s),color:"error",size:"small",disabled:s.id===a,children:e.jsxDEV(We,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:484,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:478,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:477,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:449,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:448,columnNumber:17},void 0)]},s.id,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:385,columnNumber:15},void 0))},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:370,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:369,columnNumber:7},void 0);return e.jsxDEV(H,{sx:{p:{xs:2,sm:3}},children:[x&&e.jsxDEV(S,{severity:"error",sx:{mb:3},children:x},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:506,columnNumber:9},void 0),L&&e.jsxDEV(S,{severity:"success",sx:{mb:3},children:L},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:512,columnNumber:9},void 0),ye(),e.jsxDEV(Ps,{open:z,user:K,onClose:()=>C(!1),onSave:Ve,isSaving:r},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:519,columnNumber:7},void 0),e.jsxDEV(ys,{open:!!k,user:k,onClose:()=>I(null),onConfirm:Ce,isDeleting:F},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:527,columnNumber:7},void 0),e.jsxDEV(Cs,{open:p,userId:(j==null?void 0:j.id)??null,username:(j==null?void 0:j.username)??null,onClose:()=>te(!1)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:536,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:499,columnNumber:5},void 0)};export{Ys as default};
