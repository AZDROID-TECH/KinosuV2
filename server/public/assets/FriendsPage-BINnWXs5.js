import{$ as C,a0 as D,j as e,a as ce,a2 as xe,u as ue,r as c,ah as me,b as he,T as i,P as j,g as n,B as s,c as l,a4 as R,D as pe,L as S,v as ve,I as fe,C as be,s as h,ax as ye,af as ge}from"./index-CrmpAmly.js";import{d as je}from"./CheckCircle-sO-Rh5Bt.js";import{d as L}from"./Cancel-BE4bN6YC.js";import{d as Re}from"./Person-CXxvfRlk.js";import{d as Se}from"./Email-D7mhgBPh.js";import{T as _e,a as _}from"./Tabs-C5OMgljb.js";import{G as x}from"./Grid-BUsM8iDU.js";import{C as Q}from"./Chip-BKNawDy3.js";import{S as $e}from"./Stack-DIm0lD5b.js";import{T as ke}from"./TextField-BEzaClqi.js";import{I as V}from"./InputAdornment-Drj9Og-z.js";var E={},Ce=C;Object.defineProperty(E,"__esModule",{value:!0});var K=E.default=void 0,De=Ce(D()),Ie=e;K=E.default=(0,De.default)((0,Ie.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var W={},we=C;Object.defineProperty(W,"__esModule",{value:!0});var k=W.default=void 0,qe=we(D()),ze=e;k=W.default=(0,qe.default)((0,ze.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd");var F={},Ae=C;Object.defineProperty(F,"__esModule",{value:!0});var J=F.default=void 0,Te=Ae(D()),Me=e;J=F.default=(0,Te.default)((0,Me.jsx)("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonRemove");var B={},Pe=C;Object.defineProperty(B,"__esModule",{value:!0});var P=B.default=void 0,Ee=Pe(D()),Y=e;P=B.default=(0,Ee.default)([(0,Y.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,Y.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");const $=t=>{const{children:m,value:p,index:o,...v}=t;return e.jsx("div",{role:"tabpanel",hidden:p!==o,id:`friend-tabpanel-${o}`,"aria-labelledby":`friend-tab-${o}`,...v,children:p===o&&e.jsx(s,{sx:{p:{xs:2,sm:3}},children:m})})},Xe=()=>{const t=ce(),{darkMode:m}=xe(),{isLoggedIn:p}=ue(),[o,v]=c.useState(0),[u,N]=c.useState(""),[G,X]=c.useState([]),[I,H]=c.useState(!1),[We,Fe]=c.useState(null),[Z,O]=c.useState([]),{friends:w,incomingRequests:q,outgoingRequests:f,refreshFriends:z,refreshIncomingRequests:A,refreshOutgoingRequests:T,sendFriendRequest:ee,acceptFriendRequest:re,rejectFriendRequest:U,removeFriend:te,checkFriendshipStatus:Be}=me();c.useEffect(()=>{p&&(z(),A(),T())},[p]),c.useEffect(()=>{const r=f.filter(a=>{var d;return(d=a.receiver)==null?void 0:d.id}).map(a=>a.receiver.id);O(r)},[f]);const ae=(r,a)=>{v(a)},se=r=>{N(r.target.value)},M=async()=>{if(u.trim()){H(!0);try{const r=await ye.get(`user/search?q=${u}`);X(r.data),r.data.length===0&&ge("Heç bir istifadəçi tapılmadı")}catch(r){console.error("İstifadəçi axtarışında xəta:",r),h("İstifadəçi axtarışı zamanı xəta baş verdi")}finally{H(!1)}}},ie=async r=>{try{await ee(r),O(a=>[...a,r]),M(),T()}catch(a){console.error("Dostluq istəyi göndərilərkən xəta:",a),h("Dostluq istəyi göndərilə bilmədi")}},ne=async r=>{try{await re(r),z(),A()}catch(a){console.error("Dostluq istəyi qəbul edilərkən xəta:",a),h("Dostluq istəyi qəbul edilə bilmədi")}},oe=async r=>{try{await U(r),A()}catch(a){console.error("Dostluq istəyi rədd edilərkən xəta:",a),h("Dostluq istəyi rədd edilə bilmədi")}},le=async r=>{try{await te(r),z()}catch(a){console.error("Dost silinərkən xəta:",a),h("Dost silə bilmədi")}},de=async r=>{try{await U(r),T()}catch(a){console.error("Dostluq istəyi ləğv edilərkən xəta:",a),h("Dostluq istəyi ləğv edilə bilmədi")}};return e.jsxs(he,{maxWidth:"lg",sx:{py:{xs:2,sm:4}},children:[e.jsx(i,{variant:"h4",component:"h1",gutterBottom:!0,sx:{mb:2,px:{xs:2,sm:0}},children:"Dostlar"}),e.jsxs(j,{elevation:3,sx:{borderRadius:2,overflow:"hidden",background:m?n(t.palette.background.paper,.8):n(t.palette.background.paper,.7),backdropFilter:"blur(10px)",mx:{xs:2,sm:0}},children:[e.jsx(s,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(_e,{value:o,onChange:ae,variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,"aria-label":"dostluq səkmələri",sx:{"& .MuiTab-root":{py:2,px:2,fontWeight:600,transition:"all 0.3s ease",minHeight:{xs:"48px",sm:"56px"},fontSize:{xs:"0.775rem",sm:"0.875rem"},"&:hover":{opacity:.8}},"& .Mui-selected":{color:t.palette.primary.main},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0"},"& .MuiTabs-scrollButtons":{color:t.palette.primary.main,"&.Mui-disabled":{opacity:.3}}},children:[e.jsx(_,{label:`Dostlarım (${w.length})`}),e.jsx(_,{label:`Gələn (${q.length})`}),e.jsx(_,{label:`Göndərilən (${f.length})`}),e.jsx(_,{label:"Axtar"})]})}),e.jsx($,{value:o,index:0,children:w.length===0?e.jsxs(s,{textAlign:"center",py:4,children:[e.jsx(i,{variant:"body1",color:"text.secondary",gutterBottom:!0,sx:{mb:2},children:"Hələ dostunuz yoxdur"}),e.jsx(l,{variant:"contained",color:"primary",startIcon:e.jsx(k,{}),onClick:()=>v(3),sx:{mt:2},children:"Dost Əlavə Et"})]}):e.jsx(x,{container:!0,spacing:2,children:w.map(r=>e.jsx(x,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(j,{elevation:2,sx:{p:3,borderRadius:2,height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 16px rgba(0,0,0,0.1)",transform:"translateY(-4px)"},bgcolor:m?n(t.palette.background.default,.3):n(t.palette.background.paper,.7)},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(R,{src:r.avatar_url||void 0,alt:r.username,sx:{width:64,height:64,border:`2px solid ${t.palette.primary.main}`,transition:"transform 0.2s","&:hover":{transform:"scale(1.05)"}},children:!r.avatar_url&&e.jsx(Re,{})}),e.jsxs(s,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600,display:"block",mb:.5,color:"text.primary"},children:r.username}),e.jsx(Q,{size:"small",label:"Dost",color:"primary",sx:{height:24,fontSize:"0.75rem",fontWeight:500}})]})]}),e.jsx(pe,{sx:{my:2}}),e.jsxs(s,{sx:{mt:"auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"outlined",size:"small",component:S,to:`/user/${r.id}`,sx:{borderRadius:1.5,textTransform:"none",fontWeight:500},children:"Profil"}),e.jsx(ve,{title:"Dostluqdan Çıxar",children:e.jsx(fe,{size:"medium",color:"error",onClick:()=>le(r.id),sx:{borderRadius:1.5,"&:hover":{bgcolor:n(t.palette.error.main,.1)}},children:e.jsx(J,{fontSize:"small"})})})]})]})},r.id))})}),e.jsx($,{value:o,index:1,children:q.length===0?e.jsx(s,{textAlign:"center",py:4,children:e.jsx(i,{variant:"body1",color:"text.secondary",children:"Heç bir gələn dostluq istəyi yoxdur"})}):e.jsx(x,{container:!0,spacing:3,children:q.map(r=>{var a,d,b,y,g;return e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsxs(j,{elevation:2,sx:{p:3,borderRadius:2,display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"center",sm:"flex-start"},gap:2,bgcolor:n(t.palette.primary.main,.05),border:`1px solid ${n(t.palette.primary.main,.1)}`,height:"100%"},children:[e.jsx(R,{src:((a=r.sender)==null?void 0:a.avatar_url)||void 0,sx:{width:72,height:72,bgcolor:t.palette.info.main,border:`3px solid ${t.palette.info.main}`},children:!((d=r.sender)!=null&&d.avatar_url)&&((b=r.sender)==null?void 0:b.username[0].toUpperCase())}),e.jsxs(s,{sx:{flexGrow:1,textAlign:{xs:"center",sm:"left"},mb:{xs:2,sm:0}},children:[e.jsx(i,{variant:"h6",component:S,to:`/user/${(y=r.sender)==null?void 0:y.id}`,sx:{textDecoration:"none",color:"text.primary",fontWeight:600,display:"block",mb:1,"&:hover":{color:t.palette.primary.main}},children:(g=r.sender)==null?void 0:g.username}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:{xs:"center",sm:"flex-start"},gap:1,mb:2},children:[e.jsx(Se,{fontSize:"small",color:"primary"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Sizə dostluq istəyi göndərdi"})]}),e.jsxs($e,{direction:"row",spacing:2,justifyContent:{xs:"center",sm:"flex-start"},children:[e.jsx(l,{variant:"contained",color:"primary",startIcon:e.jsx(je,{}),onClick:()=>ne(r.id),size:"small",sx:{borderRadius:1.5},children:"Qəbul Et"}),e.jsx(l,{variant:"outlined",color:"error",startIcon:e.jsx(L,{}),onClick:()=>oe(r.id),size:"small",sx:{borderRadius:1.5},children:"Rədd Et"})]})]})]})},r.id)})})}),e.jsx($,{value:o,index:2,children:f.length===0?e.jsxs(s,{textAlign:"center",py:4,children:[e.jsx(i,{variant:"body1",color:"text.secondary",children:"Heç bir göndərilmiş dostluq istəyi yoxdur"}),e.jsx(l,{variant:"contained",color:"primary",startIcon:e.jsx(k,{}),onClick:()=>v(3),sx:{mt:2},children:"Dost Əlavə Et"})]}):e.jsx(x,{container:!0,spacing:3,children:f.map(r=>{var a,d,b,y,g;return e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsxs(j,{elevation:2,sx:{p:3,borderRadius:2,display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"center",sm:"flex-start"},gap:2,bgcolor:n(t.palette.warning.main,.05),border:`1px solid ${n(t.palette.warning.main,.1)}`,height:"100%"},children:[e.jsx(R,{src:((a=r.receiver)==null?void 0:a.avatar_url)||void 0,sx:{width:72,height:72,bgcolor:t.palette.warning.main,border:`3px solid ${t.palette.warning.main}`},children:!((d=r.receiver)!=null&&d.avatar_url)&&((b=r.receiver)==null?void 0:b.username[0].toUpperCase())}),e.jsxs(s,{sx:{flexGrow:1,textAlign:{xs:"center",sm:"left"},mb:{xs:2,sm:0}},children:[e.jsx(i,{variant:"h6",component:S,to:`/user/${(y=r.receiver)==null?void 0:y.id}`,sx:{textDecoration:"none",color:"text.primary",fontWeight:600,display:"block",mb:1,"&:hover":{color:t.palette.primary.main}},children:(g=r.receiver)==null?void 0:g.username}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:{xs:"center",sm:"flex-start"},gap:1,mb:2},children:[e.jsx(P,{fontSize:"small",color:"warning"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"İstək göndərildi, cavab gözlənilir"})]}),e.jsx(l,{variant:"outlined",color:"error",startIcon:e.jsx(L,{}),onClick:()=>de(r.id),size:"small",sx:{borderRadius:1.5},children:"İstəyi Ləğv Et"})]})]})},r.id)})})}),e.jsxs($,{value:o,index:3,children:[e.jsx(s,{sx:{mb:3},children:e.jsx(ke,{fullWidth:!0,variant:"outlined",placeholder:"İstifadəçi adı axtar...",value:u,onChange:se,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:m?n(t.palette.background.default,.5):n("#fff",.9),"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:t.palette.primary.main}}},InputProps:{startAdornment:e.jsx(V,{position:"start",children:e.jsx(K,{color:"action"})}),endAdornment:e.jsx(V,{position:"end",children:e.jsx(l,{variant:"contained",color:"primary",onClick:M,disabled:!u.trim()||I,sx:{borderRadius:1.5,px:2,minWidth:"80px",height:"36px"},children:I?e.jsx(be,{size:24,color:"inherit"}):"Axtar"})})},onKeyPress:r=>{r.key==="Enter"&&u.trim()&&M()}})}),G.length>0?e.jsx(x,{container:!0,spacing:3,children:G.map(r=>e.jsx(x,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(j,{elevation:2,sx:{p:3,borderRadius:2,height:"100%",display:"flex",flexDirection:"column",bgcolor:m?n(t.palette.background.default,.3):n(t.palette.background.paper,.7),transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:[e.jsx(R,{src:r.avatar_url||void 0,sx:{width:84,height:84,mb:2,bgcolor:t.palette.secondary.main,border:`3px solid ${t.palette.secondary.main}`,"&:hover":{opacity:.9,transform:"scale(1.05)"},transition:"transform 0.2s"},children:!r.avatar_url&&r.username[0].toUpperCase()}),e.jsx(i,{variant:"h6",component:S,to:`/user/${r.id}`,sx:{textDecoration:"none",color:"text.primary",fontWeight:600,mb:1,textAlign:"center","&:hover":{color:t.palette.primary.main}},children:r.username}),e.jsx(Q,{size:"small",label:`İstifadəçi ID: ${r.id}`,color:"default",sx:{mb:2,fontSize:"0.75rem",opacity:.7,height:24}})]}),e.jsx(s,{sx:{mt:"auto",display:"flex",justifyContent:"center"},children:Z.includes(r.id)?e.jsx(l,{variant:"outlined",color:"primary",startIcon:e.jsx(P,{}),disabled:!0,fullWidth:!0,sx:{borderRadius:1.5,py:1},children:"İstək Göndərildi"}):e.jsx(l,{variant:"contained",color:"primary",startIcon:e.jsx(k,{}),onClick:()=>ie(r.id),fullWidth:!0,sx:{borderRadius:1.5,py:1},children:"Dost Əlavə Et"})})]})},r.id))}):u&&!I&&e.jsx(s,{textAlign:"center",py:4,children:e.jsx(i,{variant:"body1",color:"text.secondary",children:"Axtarış nəticəsində heç bir istifadəçi tapılmadı"})}),!u&&e.jsxs(s,{textAlign:"center",py:4,children:[e.jsx(i,{variant:"body1",color:"text.secondary",children:"İstifadəçi tapmaq üçün yuxarıdakı axtarış qutusundan istifadə edin"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1,opacity:.7},children:"Ən azı 2 hərf daxil edin"})]})]})]})]})};export{Xe as default};
