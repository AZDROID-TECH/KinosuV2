import{e as g,k as w,r as o,j as s,b as y,P as j,B as r,T as P,c as S,s as i,h as v,i as k}from"./index-CrmpAmly.js";import{T as u}from"./TextField-BEzaClqi.js";import{I as l}from"./InputAdornment-Drj9Og-z.js";const N=()=>{const h=g(),{token:d}=w(),[e,x]=o.useState({newPassword:"",confirmPassword:""}),[a,f]=o.useState(!1),[c,m]=o.useState(!1),b=async t=>{if(t.preventDefault(),!d){i("Etibarsız şifrə yeniləmə linki");return}if(e.newPassword!==e.confirmPassword){i("Şifrələr uyğun gəlmir");return}try{m(!0);const n=(await v.resetPassword(d,e.newPassword)).message||"Şifrəniz uğurla yeniləndi";k(n),setTimeout(()=>{h("/login")},1500)}catch(p){const n=p.message||"Şifrə yeniləmə zamanı xəta baş verdi";i(n)}finally{m(!1)}};return s.jsx(y,{component:"main",maxWidth:"xs",sx:{py:{xs:2,sm:4}},children:s.jsxs(j,{elevation:3,sx:{p:{xs:2,sm:3},display:"flex",flexDirection:"column",alignItems:"center",width:"100%",borderRadius:2,position:"relative",overflow:"hidden"},children:[s.jsx(r,{sx:{position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #2196f3 0%, #64b5f6 100%)"}}),s.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[s.jsx(r,{sx:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"primary.main",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:s.jsx("i",{className:"bx bx-lock-open-alt",style:{fontSize:"24px",color:"white"}})}),s.jsx(P,{component:"h1",variant:"h6",sx:{fontWeight:"bold",letterSpacing:"0.5px"},children:"Şifrəni Yenilə"})]}),s.jsxs(r,{component:"form",onSubmit:b,sx:{width:"100%"},children:[s.jsx(u,{required:!0,fullWidth:!0,size:"small",name:"newPassword",label:"Yeni şifrə",type:a?"text":"password",value:e.newPassword,onChange:t=>x({...e,newPassword:t.target.value}),InputProps:{startAdornment:s.jsx(l,{position:"start",children:s.jsx("i",{className:"bx bx-lock-alt",style:{fontSize:"18px",color:"action.active"}})}),endAdornment:s.jsx(l,{position:"end",children:s.jsx("button",{type:"button",onClick:()=>f(!a),className:"password-toggle",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"inherit"},children:s.jsx("i",{className:`bx ${a?"bx-show":"bx-hide"}`,style:{fontSize:"18px"}})})})},sx:{mb:1.5}}),s.jsx(u,{required:!0,fullWidth:!0,size:"small",name:"confirmPassword",label:"Şifrəni təkrarla",type:a?"text":"password",value:e.confirmPassword,onChange:t=>x({...e,confirmPassword:t.target.value}),InputProps:{startAdornment:s.jsx(l,{position:"start",children:s.jsx("i",{className:"bx bx-lock-alt",style:{fontSize:"18px",color:"action.active"}})})},sx:{mb:2}}),s.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",size:"small",disabled:c,sx:{py:1,borderRadius:1.5,fontWeight:"bold",textTransform:"none",fontSize:"0.9rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",transition:"all 0.2s","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},children:c?s.jsx(s.Fragment,{children:"Yüklənir..."}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bx bx-check",style:{fontSize:"18px",marginRight:"6px"}}),"Şifrəni Yenilə"]})})]})]})})};export{N as default};
