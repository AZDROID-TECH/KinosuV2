import{i as M,r as z,a as j,e as B,b as a,j as e,c as O,I as y,ak as H,B as W,C as S,A as _,au as ye,av as _e,ax as Se,T as V,L as $e,aB as ke,g as I,am as Y,ap as Re,u as Ie,aj as w,P as Te,al as Le,W as Oe,aC as we,S as Ne,Z as be}from"./index-CRA6_osR.js";import{d as ce,a as We}from"./Delete-C7cBMSCR.js";import{f as Be,T as He,a as qe,b as Fe,c as fe,d,e as Qe}from"./OpenInNew-QpuiAlSp.js";import{b as Ye,f as Ge,l as Je,d as Xe}from"./index-BUy9bP0J.js";import{a as Ze,s as es}from"./toastHelper-Dhu-gvGD.js";import{C as ss,D as is}from"./ConfirmationDialog-ClZsGObl.js";import{D as J,a as X,b as Z}from"./DialogTitle-BipdMIKu.js";import{L as as}from"./Link-CLgDQ3nV.js";import{D as ee}from"./DialogActions-2T0SPT2s.js";import{T as ve}from"./TextField-C5oxrvYs.js";var se={},ns=M;Object.defineProperty(se,"__esModule",{value:!0});var G=se.default=void 0,rs=ns(z()),xe=j();G=se.default=(0,rs.default)([(0,xe.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),(0,xe.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")],"AdminPanelSettings");var ie={},os=M;Object.defineProperty(ie,"__esModule",{value:!0});var he=ie.default=void 0,ds=os(z()),ls=j();he=ie.default=(0,ds.default)((0,ls.jsx)("path",{d:"m22.27 21.73-3.54-3.55L5.78 5.23 2.27 1.72 1 2.99 3.01 5H3v6c0 5.55 3.84 10.74 9 12 2.16-.53 4.08-1.76 5.6-3.41L21 23zM13 9.92l6.67 6.67C20.51 14.87 21 12.96 21 11V5l-9-4-5.48 2.44L11 7.92z"}),"RemoveModerator");var ae={},ms=M;Object.defineProperty(ae,"__esModule",{value:!0});var pe=ae.default=void 0,ts=ms(z()),us=j();pe=ae.default=(0,ts.default)((0,us.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var ne={},cs=M;Object.defineProperty(ne,"__esModule",{value:!0});var re=ne.default=void 0,fs=cs(z()),vs=j();re=ne.default=(0,fs.default)((0,vs.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline");var oe={},xs=M;Object.defineProperty(oe,"__esModule",{value:!0});var De=oe.default=void 0,Ns=xs(z()),bs=j();De=oe.default=(0,Ns.default)((0,bs.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var de={},hs=M;Object.defineProperty(de,"__esModule",{value:!0});var ge=de.default=void 0,ps=hs(z()),Ds=j();ge=de.default=(0,ps.default)((0,Ds.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");var le={},gs=M;Object.defineProperty(le,"__esModule",{value:!0});var Me=le.default=void 0,Ms=gs(z()),zs=j();Me=le.default=(0,Ms.default)((0,zs.jsx)("path",{d:"M17 10H7v2h10zm2-7h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14zm-5-5H7v2h7z"}),"EventNote");var me={},js=M;Object.defineProperty(me,"__esModule",{value:!0});var ze=me.default=void 0,Es=js(z()),Us=j();ze=me.default=(0,Es.default)((0,Us.jsx)("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2zm10 14.5V20H8v-3.5l4-4zm-4-5-4-4V4h8v3.5z"}),"HourglassEmpty");var te={},As=M;Object.defineProperty(te,"__esModule",{value:!0});var je=te.default=void 0,Vs=As(z()),Ks=j();je=te.default=(0,Vs.default)((0,Ks.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");const Cs={pending:{label:"Gözləmədə",icon:e.jsxDEV(ze,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:50,columnNumber:42},void 0),color:"warning"},approved:{label:"Təsdiqlənmiş",icon:e.jsxDEV(Re,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:51,columnNumber:46},void 0),color:"success"},rejected:{label:"İptal edildi",icon:e.jsxDEV(je,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:52,columnNumber:46},void 0),color:"error"}},Ps=({open:f,onClose:n,userId:l,username:N})=>{const r=B(),[t,u]=a.useState([]),[m,g]=a.useState(!1),[E,K]=a.useState(null),[U,b]=a.useState(null),[h,$]=a.useState(!1),[o,k]=a.useState(null),C=a.useCallback(async()=>{if(l){g(!0),K(null),u([]);try{const i=await Ye(l);u(i)}catch(i){console.error("İstifadəçi şərhlərini gətirmə xətası:",i),K(i.message||"İstifadəçinin şərhləri gətirilərkən xəta baş verdi.")}finally{g(!1)}}},[l]);a.useEffect(()=>{f&&l&&C(),f||(u([]),K(null),g(!1))},[f,l,C]);const q=i=>{k(i),$(!0)},P=async()=>{if(o){b(o.id);try{await Xe(o.id),Ze("Şərh uğurla silindi."),u(i=>i.filter(p=>p.id!==o.id)),$(!1),k(null)}catch(i){es(i.message||"Şərh silinərkən xəta baş verdi.")}finally{b(null)}}},A=i=>{try{return Ge(new Date(i),{addSuffix:!0,locale:Je})}catch{return i}},F=i=>{const p=Cs[i]||{label:i,icon:null,color:"default"};return e.jsxDEV(V,{title:`Status: ${p.label}`,children:e.jsxDEV(Y,{icon:p.icon,label:p.label,size:"small",color:p.color,variant:"outlined",sx:{ml:1.5,opacity:.85,fontSize:"0.75rem",height:"22px"}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:124,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:123,columnNumber:13},void 0)};return e.jsxDEV(J,{open:f,onClose:n,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:2,height:"85vh"}},children:[e.jsxDEV(X,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1,borderBottom:`1px solid ${r.palette.divider}`},children:[e.jsxDEV(O,{variant:"h6",component:"span",children:[e.jsxDEV(re,{sx:{verticalAlign:"bottom",mr:1,opacity:.8}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:152,columnNumber:21},void 0),e.jsxDEV("strong",{children:N||"İstifadəçi"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:153,columnNumber:21},void 0)," Şərhləri"]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:151,columnNumber:17},void 0),e.jsxDEV(y,{onClick:n,size:"small",children:e.jsxDEV(De,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:156,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:155,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:144,columnNumber:13},void 0),e.jsxDEV(Z,{dividers:!0,sx:{bgcolor:H(r.palette.action.hover,.2),p:0},children:m?e.jsxDEV(W,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",py:5},children:e.jsxDEV(S,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:165,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:164,columnNumber:21},void 0):E?e.jsxDEV(_,{severity:"error",sx:{m:2},children:E},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:168,columnNumber:21},void 0):t.length===0?e.jsxDEV(_,{severity:"info",sx:{m:2},children:"Bu istifadəçinin heç bir şərhi yoxdur."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:170,columnNumber:21},void 0):e.jsxDEV(ye,{disablePadding:!0,children:t.map(i=>e.jsxDEV(_e,{alignItems:"flex-start",secondaryAction:e.jsxDEV(V,{title:"Şərhi sil",children:e.jsxDEV(y,{edge:"end","aria-label":"sil",onClick:()=>q(i),disabled:U===i.id,size:"small",children:U===i.id?e.jsxDEV(S,{size:20},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:186,columnNumber:81},void 0):e.jsxDEV(ge,{fontSize:"small",color:"error"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:186,columnNumber:114},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:179,columnNumber:41},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:178,columnNumber:37},void 0),sx:{py:2,px:2.5,borderBottom:`1px solid ${r.palette.divider}`},children:e.jsxDEV(Se,{primary:e.jsxDEV(O,{variant:"body2",sx:{mb:1},children:i.content},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:198,columnNumber:41},void 0),secondary:e.jsxDEV(W,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:.5,mt:.5},children:[e.jsxDEV(V,{title:"Film",children:e.jsxDEV(as,{component:$e,to:`/movie/${i.movie_imdb_id}`,target:"_blank",underline:"hover",color:"text.secondary",sx:{display:"inline-flex",alignItems:"center",mr:1},children:[e.jsxDEV(ke,{sx:{fontSize:"1rem",mr:.5,opacity:.7}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:213,columnNumber:53},void 0),i.movieTitle||i.movie_imdb_id,e.jsxDEV(Be,{sx:{fontSize:"0.8rem",ml:.5,opacity:.7}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:215,columnNumber:53},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:205,columnNumber:49},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:204,columnNumber:45},void 0),e.jsxDEV(V,{title:"Tarix",children:e.jsxDEV(O,{component:"span",variant:"caption",color:"text.secondary",sx:{display:"inline-flex",alignItems:"center"},children:[e.jsxDEV(Me,{sx:{fontSize:"1rem",mr:.5,opacity:.7}},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:220,columnNumber:53},void 0),A(i.created_at)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:219,columnNumber:49},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:218,columnNumber:45},void 0),F(i.status)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:203,columnNumber:41},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:196,columnNumber:33},void 0)},i.id,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:174,columnNumber:29},void 0))},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:172,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:159,columnNumber:13},void 0),e.jsxDEV(ee,{sx:{borderTop:`1px solid ${r.palette.divider}`},children:e.jsxDEV(I,{onClick:n,children:"Bağla"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:234,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:233,columnNumber:13},void 0),e.jsxDEV(ss,{open:h,onClose:()=>$(!1),onConfirm:P,title:"Şərh Silmə Təsdiqi",message:e.jsxDEV(e.Fragment,{children:["Seçilmiş şərhi (",o==null?void 0:o.id,") silmək istədiyinizə əminsinizmi?",e.jsxDEV("br",{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:244,columnNumber:96},void 0),e.jsxDEV(O,{variant:"caption",color:"text.secondary",children:['"',e.jsxDEV("i",{children:[o==null?void 0:o.content.substring(0,50),o!=null&&o.content&&o.content.length>50?"...":""]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:246,columnNumber:30},void 0),'"']},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:245,columnNumber:25},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:248,columnNumber:25},void 0),"Bu əməliyyat geri alına bilməz."]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:243,columnNumber:21},void 0),confirmText:"Bəli, Sil",cancelText:"Xeyr, Ləğv Et",isLoading:!!U,confirmButtonColor:"error"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:237,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/components/Admin/UserCommentsModal.tsx",lineNumber:137,columnNumber:9},void 0)},ys=({open:f,user:n,onClose:l,onSave:N,isSaving:r})=>{const[t,u]=a.useState(""),[m,g]=a.useState(""),E=B(),K=be(E.breakpoints.down("sm"));a.useEffect(()=>{n&&(u(n.username||""),g(n.email||""))},[n]);const U=b=>{if(b.preventDefault(),!n)return;const h={};if(t&&t!==n.username&&(h.username=t),m&&m!==n.email&&(h.email=m),Object.keys(h).length===0){l();return}N(n.id,h)};return e.jsxDEV(J,{open:f,onClose:l,fullScreen:K,PaperProps:{sx:{borderRadius:{xs:0,sm:2},width:{sm:"450px"},maxWidth:"100%"}},children:[e.jsxDEV(X,{sx:{bgcolor:H(E.palette.secondary.main,.1),pb:1},children:"İstifadəçini Redaktə Et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:102,columnNumber:7},void 0),e.jsxDEV("form",{onSubmit:U,children:[e.jsxDEV(Z,{sx:{pt:3},children:e.jsxDEV(Ne,{spacing:3,children:[e.jsxDEV(ve,{label:"İstifadəçi adı",fullWidth:!0,value:t,onChange:b=>u(b.target.value),autoFocus:!0,InputLabelProps:{shrink:!0},disabled:r},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:108,columnNumber:13},void 0),e.jsxDEV(ve,{label:"E-poçt",type:"email",fullWidth:!0,value:m,onChange:b=>g(b.target.value),InputLabelProps:{shrink:!0},disabled:r},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:117,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:107,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:106,columnNumber:9},void 0),e.jsxDEV(ee,{sx:{px:3,pb:3},children:[e.jsxDEV(I,{onClick:l,color:"inherit",disabled:r,variant:"outlined",children:"Ləğv et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:129,columnNumber:11},void 0),e.jsxDEV(I,{type:"submit",color:"secondary",variant:"contained",disabled:r,sx:{minWidth:"100px"},children:r?e.jsxDEV(S,{size:20,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:144,columnNumber:25},void 0):"Saxla"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:137,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:128,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:105,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:90,columnNumber:5},void 0)},_s=({open:f,user:n,onClose:l,onConfirm:N,isDeleting:r})=>{const t=B(),u=be(t.breakpoints.down("sm"));return e.jsxDEV(J,{open:f,onClose:l,fullScreen:u,PaperProps:{sx:{borderRadius:{xs:0,sm:2},width:{sm:"450px"},maxWidth:"100%"}},children:[e.jsxDEV(X,{sx:{bgcolor:H(t.palette.error.main,.1),pb:1,color:t.palette.error.main},children:"İstifadəçini Sil"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:177,columnNumber:7},void 0),e.jsxDEV(Z,{sx:{pt:3},children:e.jsxDEV(is,{children:[e.jsxDEV("strong",{children:n==null?void 0:n.username},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:182,columnNumber:11},void 0)," istifadəçisini silmək istədiyinizə əminsiniz? Bu əməliyyat geri qaytarıla bilməz və istifadəçinin bütün məlumatları silinəcək."]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:181,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:180,columnNumber:7},void 0),e.jsxDEV(ee,{sx:{px:3,pb:3},children:[e.jsxDEV(I,{onClick:l,color:"inherit",disabled:r,variant:"outlined",children:"Ləğv et"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:187,columnNumber:9},void 0),e.jsxDEV(I,{onClick:()=>n&&N(n.id),color:"error",variant:"contained",disabled:r,sx:{minWidth:"100px"},children:r?e.jsxDEV(S,{size:20,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:202,columnNumber:25},void 0):"Sil"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:195,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:186,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:165,columnNumber:5},void 0)},Bs=()=>{const{username:f}=Ie(),n=B(),[l,N]=a.useState([]),[r,t]=a.useState(!0),[u,m]=a.useState(null),[g,E]=a.useState(null),[K,U]=a.useState(null),[b,h]=a.useState(!1),[$,o]=a.useState(!1),[k,C]=a.useState(null),[q,P]=a.useState(!1),[A,F]=a.useState(null),[i,p]=a.useState(!1),[T,L]=a.useState(null),ue=a.useCallback(async()=>{var s,v;t(!0),m(null);try{const c=await w.getAllUsers();N(c)}catch(c){console.error("İstifadəçi siyahısı alınarkən xəta:",c);const x=((v=(s=c.response)==null?void 0:s.data)==null?void 0:v.error)||c.message||"İstifadəçi siyahısı alınamadı.";m(x),N([])}finally{t(!1)}},[]);a.useEffect(()=>{ue()},[ue]),a.useEffect(()=>{if(T){const s=setTimeout(()=>{L(null)},5e3);return()=>clearTimeout(s)}},[T]);const Ee=async(s,v)=>{var c,x;E(s),m(null);try{await w.setUserAdminStatus(s,!v),N(D=>D.map(R=>R.id===s?{...R,is_admin:!v}:R)),L(`İstifadəçinin admin statusu ${v?"alındı":"verildi"}.`)}catch(D){console.error(`Admin statusu dəyişdirilərkən xəta (ID: ${s}):`,D),m(((x=(c=D.response)==null?void 0:c.data)==null?void 0:x.error)||"Admin statusu yenilənərkən xəta baş verdi.")}finally{E(null)}},Ue=s=>{U(s),h(!0)},Ae=async(s,v)=>{var c,x;o(!0),m(null);try{const D=await w.updateUser(s,v);N(R=>R.map(Q=>Q.id===s?{...Q,...v}:Q)),L("İstifadəçi məlumatları uğurla yeniləndi."),o(!1),h(!1),U(null)}catch(D){console.error(`İstifadəçi məlumatları yenilənərkən xəta (ID: ${s}):`,D),m(((x=(c=D.response)==null?void 0:c.data)==null?void 0:x.error)||"İstifadəçi məlumatları yenilənərkən xəta baş verdi."),o(!1)}},Ve=s=>{C(s),P(!1)},Ke=async s=>{var v,c;P(!0),m(null);try{await w.deleteUser(s),N(x=>x.filter(D=>D.id!==s)),L("İstifadəçi uğurla silindi."),P(!1),C(null)}catch(x){console.error(`İstifadəçi silinərkən xəta (ID: ${s}):`,x),m(((c=(v=x.response)==null?void 0:v.data)==null?void 0:c.error)||"İstifadəçi silinərkən xəta baş verdi."),P(!1)}},Ce=s=>{F(s),p(!0)},Pe=()=>r?e.jsxDEV(W,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:5},children:e.jsxDEV(S,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:341,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:340,columnNumber:9},void 0):u?e.jsxDEV(_,{severity:"error",sx:{mt:2},children:u},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:347,columnNumber:14},void 0):l.length===0?e.jsxDEV(_,{severity:"info",sx:{mt:2},children:"Heç bir istifadəçi tapılmadı."},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:351,columnNumber:14},void 0):e.jsxDEV(He,{component:Te,elevation:2,sx:{mt:2},children:e.jsxDEV(qe,{sx:{minWidth:750},"aria-label":"istifadəçilər cədvəli",children:[e.jsxDEV(Fe,{sx:{backgroundColor:H(n.palette.secondary.main,.1)},children:e.jsxDEV(fe,{children:[e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"ID"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:359,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"Avatar"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:360,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"İstifadəçi adı"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:361,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"E-poçt"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:362,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"Status"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:363,columnNumber:15},void 0),e.jsxDEV(d,{sx:{fontWeight:"bold"},children:"Qoşulma Tarixi"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:364,columnNumber:15},void 0),e.jsxDEV(d,{align:"center",sx:{fontWeight:"bold"},children:"Şərhlər"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:365,columnNumber:15},void 0),e.jsxDEV(d,{align:"center",sx:{fontWeight:"bold"},children:"Əməliyyatlar"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:366,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:358,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:357,columnNumber:11},void 0),e.jsxDEV(Qe,{children:l.map(s=>e.jsxDEV(fe,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[e.jsxDEV(d,{component:"th",scope:"row",children:s.id},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:376,columnNumber:17},void 0),e.jsxDEV(d,{children:e.jsxDEV(Le,{src:s.avatar_url||void 0,alt:s.username,sx:{width:36,height:36},children:!s.avatar_url&&e.jsxDEV(ce,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:379,columnNumber:42},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:378,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:377,columnNumber:17},void 0),e.jsxDEV(d,{sx:{fontWeight:"medium"},children:s.username},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:382,columnNumber:17},void 0),e.jsxDEV(d,{children:s.email||"-"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:383,columnNumber:17},void 0),e.jsxDEV(d,{children:s.is_admin?e.jsxDEV(Y,{icon:e.jsxDEV(G,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:387,columnNumber:29},void 0),label:"Admin",color:"secondary",size:"small",variant:"outlined"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:386,columnNumber:21},void 0):e.jsxDEV(Y,{icon:e.jsxDEV(ce,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:395,columnNumber:29},void 0),label:"İstifadəçi",size:"small",variant:"outlined"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:394,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:384,columnNumber:17},void 0),e.jsxDEV(d,{children:Oe(s.created_at)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:402,columnNumber:17},void 0),e.jsxDEV(d,{align:"center",children:e.jsxDEV(V,{title:`${s.username} adlı istifadəçinin şərhlərinə bax`,children:e.jsxDEV(we,{badgeContent:s.comment_count||0,color:"info",invisible:!s.comment_count||s.comment_count===0,sx:{"& .MuiBadge-badge":{fontSize:"0.7rem",height:16,minWidth:16}},children:e.jsxDEV(y,{size:"small",onClick:()=>Ce(s),color:"info",children:e.jsxDEV(re,{fontSize:"small"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:416,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:411,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:405,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:404,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:403,columnNumber:17},void 0),e.jsxDEV(d,{align:"center",children:e.jsxDEV(Ne,{direction:"row",spacing:.5,justifyContent:"center",children:[e.jsxDEV(V,{title:s.is_admin?"Admin Yetkisini Al":"Admin Yetkisi Ver",children:e.jsxDEV("span",{children:e.jsxDEV(y,{color:s.is_admin?"error":"secondary",onClick:()=>Ee(s.id,s.is_admin),disabled:r||g===s.id||s.username===f,size:"small",children:g===s.id?e.jsxDEV(S,{size:20,color:"inherit"},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:432,columnNumber:29},void 0):s.is_admin?e.jsxDEV(he,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:434,columnNumber:29},void 0):e.jsxDEV(G,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:436,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:425,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:424,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:423,columnNumber:21},void 0),e.jsxDEV(V,{title:"Düzənlə",children:e.jsxDEV("span",{children:e.jsxDEV(y,{color:"primary",onClick:()=>Ue(s),disabled:r||s.username===f,size:"small",children:e.jsxDEV(pe,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:450,columnNumber:27},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:444,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:443,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:442,columnNumber:21},void 0),e.jsxDEV(V,{title:"Sil",children:e.jsxDEV("span",{children:e.jsxDEV(y,{color:"error",onClick:()=>Ve(s),disabled:r||s.username===f,size:"small",children:e.jsxDEV(We,{},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:463,columnNumber:27},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:457,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:456,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:455,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:422,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:421,columnNumber:17},void 0)]},s.id,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:371,columnNumber:15},void 0))},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:369,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:356,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:355,columnNumber:7},void 0);return e.jsxDEV(W,{sx:{p:{xs:2,sm:3}},children:[u&&e.jsxDEV(_,{severity:"error",sx:{mb:3},children:u},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:486,columnNumber:9},void 0),T&&e.jsxDEV(_,{severity:"success",sx:{mb:3},children:T},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:492,columnNumber:9},void 0),Pe(),e.jsxDEV(ys,{open:b,user:K,onClose:()=>h(!1),onSave:Ae,isSaving:$},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:499,columnNumber:7},void 0),e.jsxDEV(_s,{open:!!k,user:k,onClose:()=>C(null),onConfirm:Ke,isDeleting:q},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:507,columnNumber:7},void 0),e.jsxDEV(Ps,{open:i,userId:(A==null?void 0:A.id)??null,username:(A==null?void 0:A.username)??null,onClose:()=>p(!1)},void 0,!1,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:516,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/azdroid/Masaüstü/Dev/Kinosu/src/pages/AdminUsersPage.tsx",lineNumber:479,columnNumber:5},void 0)};export{Bs as default};
