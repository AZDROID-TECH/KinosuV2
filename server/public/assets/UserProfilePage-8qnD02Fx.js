import{ag as $,j as e,$ as ie,a0 as ae,k as Me,e as Re,a as Fe,a2 as _e,u as Ie,ah as De,ai as Pe,r as o,b as B,P as x,B as n,S as h,D as Q,g as a,T as s,C as S,c as m,a3 as Z,aj as Ae,v as ee,M as te,x as b,i as Be,s as Te,ak as ne}from"./index-CrmpAmly.js";import{f as T}from"./movieHelpers-DztUmcMh.js";import{d as We}from"./Movie-DhY2fVyV.js";import{d as $e,a as qe}from"./WatchLater-9_dy8Y6K.js";import{d as Ee}from"./CheckCircle-sO-Rh5Bt.js";import{G as c}from"./Grid-BUsM8iDU.js";import{C as W}from"./Chip-BKNawDy3.js";import{S as Le}from"./Stack-DIm0lD5b.js";import{C as M,a as R}from"./CardContent-DKoYk2p5.js";import{C as re}from"./CardMedia-DGLTuMIa.js";import{R as se}from"./Rating-CAKrURmv.js";import"./visuallyHidden-Dan1xhjv.js";const He=$(e.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth"),Oe=$(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),Ve=$(e.jsx("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonRemove");var q={},Xe=ie;Object.defineProperty(q,"__esModule",{value:!0});var le=q.default=void 0,Ge=Xe(ae()),Ue=e;le=q.default=(0,Ge.default)((0,Ue.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");var E={},Ne=ie;Object.defineProperty(E,"__esModule",{value:!0});var oe=E.default=void 0,Ye=Ne(ae()),Je=e;oe=E.default=(0,Ye.default)((0,Je.jsx)("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"}),"Sort");ne`
  0% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7);
  }
  70% {
    transform: scale(1);
    box-shadow: 0 0 0 5px rgba(76, 175, 80, 0);
  }
  100% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
  }
`;ne`
  0% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7);
  }
  70% {
    transform: scale(1);
    box-shadow: 0 0 0 5px rgba(244, 67, 54, 0);
  }
  100% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
  }
`;const dt=()=>{const{userId:F,username:_}=Me(),de=Re(),i=Fe(),{darkMode:u}=_e(),{isLoggedIn:I,userId:D}=Ie(),{checkFriendshipStatus:v,sendFriendRequest:ce,removeFriend:xe}=De(),{isUserOnline:ue}=Pe(),[r,he]=o.useState(null),[L,H]=o.useState(!0),[y,O]=o.useState(null),[w,P]=o.useState(null),[pe,V]=o.useState(!1),[k,C]=o.useState(!1),[X,G]=o.useState(null),[U,N]=o.useState(null),[f,me]=o.useState("all"),[Y,be]=o.useState("rating"),[J,fe]=o.useState(6);o.useEffect(()=>{(async()=>{var l,d;H(!0),O(null);try{let p;if(F)p=await Z.getPublicProfile(F);else if(_)p=await Z.getPublicProfileByUsername(_);else throw new Error("İstifadəçi ID'si və ya istifadəçi adı tapılmadı");he(p)}catch(p){console.error("İstifadəçi profili alınarkən xəta:",p),O(((d=(l=p.response)==null?void 0:l.data)==null?void 0:d.error)||p.error||"İstifadəçi profili tapılmadı")}finally{H(!1)}})()},[F,_]),o.useEffect(()=>{(async()=>{if(!(!I||!r||r.id===D)){V(!0);try{const l=await v(r.id);P(l)}catch(l){console.error("Dostluq durumu yoxlanılarkən xəta:",l)}finally{V(!1)}}})()},[I,r,D,v]);const ge=async()=>{if(r){C(!0);try{await ce(r.id);const t=await v(r.id);P(t)}catch(t){console.error("Dostluq istəyi göndərilməsi zamanı xəta:",t)}finally{C(!1)}}},je=async()=>{if(r){C(!0);try{await xe(r.id);const t=await v(r.id);P(t),Be("Dostluq əlaqəsi silindi")}catch(t){console.error("Dostluq əlaqəsi silinərkən xəta:",t),Te("Dostluq əlaqəsi silinə bilmədi")}finally{C(!1)}}},ve=()=>w?pe?e.jsx(S,{size:24}):w.status==="pending"?w.message.includes("göndərilmiş")?e.jsx(m,{variant:"outlined",fullWidth:!0,color:"warning",startIcon:e.jsx("i",{className:"bx bx-time"}),disabled:!0,children:"İstək göndərildi"}):null:w.status==="accepted"?e.jsx(m,{variant:"outlined",fullWidth:!0,color:"error",startIcon:e.jsx(Ve,{}),disabled:k,onClick:je,children:k?e.jsx(S,{size:24,color:"inherit"}):"Dostluqdan Çıxar"}):e.jsx(m,{variant:"contained",fullWidth:!0,color:"primary",startIcon:e.jsx(Oe,{}),disabled:k,onClick:ge,children:k?e.jsx(S,{size:24,color:"inherit"}):"Dost Əlavə Et"}):null,g=t=>{switch(t){case"watchlist":return{icon:e.jsx(qe,{}),label:"İzləmə Siyahısında",color:i.palette.info.main};case"watching":return{icon:e.jsx($e,{}),label:"İzlənilir",color:i.palette.warning.main};case"watched":return{icon:e.jsx(Ee,{}),label:"İzlənildi",color:i.palette.success.main};default:return{icon:e.jsx(We,{}),label:"Bilinməyən",color:i.palette.grey[500]}}},ye=t=>{G(t.currentTarget)},j=t=>{t&&me(t),G(null)},we=t=>{N(t.currentTarget)},z=t=>{t&&be(t),N(null)},ke=()=>!r||!r.topRatedMovies?[]:f==="all"?r.topRatedMovies:r.topRatedMovies.filter(t=>t.status===f),A=()=>{const t=ke();switch(Y){case"rating":return[...t].sort((l,d)=>d.user_rating-l.user_rating);case"imdb":return[...t].sort((l,d)=>d.imdb_rating-l.imdb_rating);case"date":return[...t].sort((l,d)=>new Date(d.created_at).getTime()-new Date(l.created_at).getTime());default:return t}},K=t=>{switch(t){case"all":return"Bütün Filmlər";case"watchlist":return"İzləməli";case"watching":return"İzləyirəm";case"watched":return"İzlədim";default:return"Filmlər"}},Ce=t=>{switch(t){case"rating":return"İstifadəçi Xalı";case"imdb":return"IMDb Xalı";case"date":return"Tarix";default:return"Sıralama"}},ze=()=>{fe(t=>t+3)},Se=()=>r?e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{item:!0,xs:12,md:4,children:e.jsx(x,{elevation:0,sx:{p:3,borderRadius:2,bgcolor:u?a(i.palette.background.paper,.6):i.palette.background.paper,backdropFilter:"blur(10px)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(n,{sx:{position:"relative",mb:2},children:e.jsx(Ae,{src:r.avatar||void 0,alt:r.username,isOnline:ue(r.id),size:120,sx:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",border:`4px solid ${i.palette.background.paper}`}})}),e.jsx(s,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:r.username}),e.jsx(W,{label:`Üzv: ${T(r.createdAt)}`,variant:"outlined",size:"small",icon:e.jsx(He,{fontSize:"small"}),sx:{borderColor:a(i.palette.divider,.6),mb:2,px:1}}),I&&r.id!==D&&e.jsx(n,{sx:{width:"100%",mt:2},children:ve()}),e.jsx(Q,{sx:{width:"100%",my:3}}),e.jsxs(Le,{spacing:2,width:"100%",children:[e.jsx(s,{variant:"subtitle1",fontWeight:"bold",color:"primary.main",children:"Film Statistikaları"}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h6",fontWeight:"bold",children:r.stats.total||0}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Ümumi"})]}),e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h6",fontWeight:"bold",children:r.stats.watchlist||0}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"İzləməli"})]}),e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h6",fontWeight:"bold",children:r.stats.watching||0}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"İzləyirəm"})]}),e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h6",fontWeight:"bold",children:r.stats.watched||0}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"İzlədim"})]})]})]})]})})}),e.jsxs(c,{item:!0,xs:12,md:8,children:[r.latestMovie&&e.jsxs(x,{elevation:3,sx:{p:3,borderRadius:3,mb:3,background:u?a(i.palette.background.paper,.8):a(i.palette.background.paper,.7),backdropFilter:"blur(10px)"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{position:"relative",display:"inline-block",mb:2,"&:after":{content:'""',position:"absolute",width:"30%",height:"3px",bottom:"-5px",left:0,backgroundColor:u?"#bb86fc":"#3f51b5",borderRadius:"2px"}},children:"Son Əlavə Edilən Film"}),e.jsxs(M,{sx:{display:"flex",borderRadius:2,border:`1px solid ${a(i.palette.divider,.1)}`,boxShadow:`0 4px 12px ${a(i.palette.divider,.2)}`},children:[e.jsx(re,{component:"img",sx:{width:120,objectFit:"cover"},image:r.latestMovie.poster,alt:r.latestMovie.title}),e.jsxs(R,{sx:{flex:"1 0 auto",py:2},children:[e.jsx(s,{variant:"h6",component:"div",children:r.latestMovie.title}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",mt:1},children:[e.jsx(se,{value:r.latestMovie.imdb_rating/2,precision:.5,readOnly:!0,size:"small"}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{ml:1},children:[r.latestMovie.imdb_rating,"/10"]})]}),e.jsxs(n,{sx:{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(()=>{const{icon:t,label:l,color:d}=g(r.latestMovie.status);return e.jsx(W,{icon:t,label:l,size:"small",sx:{color:d,bgcolor:a(d,.1),borderColor:a(d,.3)},variant:"outlined"})})(),e.jsx(s,{variant:"caption",color:"text.secondary",children:T(r.latestMovie.created_at)})]})]})]})]}),r.topRatedMovies&&r.topRatedMovies.length>0&&e.jsxs(x,{elevation:3,sx:{p:3,borderRadius:3,mb:3,background:u?a(i.palette.background.paper,.8):a(i.palette.background.paper,.7),backdropFilter:"blur(10px)"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(s,{variant:"h6",sx:{position:"relative",display:"inline-block",mb:{xs:2,sm:0},textAlign:"left",width:{xs:"100%",sm:"auto"},"&:after":{content:'""',position:"absolute",width:"30%",height:"3px",bottom:"-5px",left:0,backgroundColor:u?"#bb86fc":"#3f51b5",borderRadius:"2px"}},children:"İstifadəçinin film siyahısı"}),e.jsxs(n,{sx:{display:"flex",gap:1,width:{xs:"100%",sm:"auto"},justifyContent:{xs:"center",sm:"flex-start"}},children:[e.jsx(ee,{title:"Filtr",children:e.jsx(m,{size:"small",variant:"outlined",startIcon:e.jsx(le,{}),onClick:ye,sx:{borderRadius:2,textTransform:"none",borderColor:a(i.palette.primary.main,.5)},children:K(f)})}),e.jsxs(te,{anchorEl:X,open:!!X,onClose:()=>j(),children:[e.jsx(b,{onClick:()=>j("all"),children:"Bütün Filmlər"}),e.jsx(b,{onClick:()=>j("watchlist"),children:"İzləməli"}),e.jsx(b,{onClick:()=>j("watching"),children:"İzləyirəm"}),e.jsx(b,{onClick:()=>j("watched"),children:"İzlədim"})]}),e.jsx(ee,{title:"Sıralama",children:e.jsx(m,{size:"small",variant:"outlined",startIcon:e.jsx(oe,{}),onClick:we,sx:{borderRadius:2,textTransform:"none",borderColor:a(i.palette.primary.main,.5)},children:Ce(Y)})}),e.jsxs(te,{anchorEl:U,open:!!U,onClose:()=>z(),children:[e.jsx(b,{onClick:()=>z("rating"),children:"İstifadəçi Xalı"}),e.jsx(b,{onClick:()=>z("imdb"),children:"IMDb Xalı"}),e.jsx(b,{onClick:()=>z("date"),children:"Tarix"})]})]})]}),e.jsx(c,{container:!0,spacing:2,children:A().slice(0,J).map((t,l)=>e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsxs(M,{sx:{display:"flex",height:"100%",borderRadius:2,border:`1px solid ${a(i.palette.divider,.1)}`,overflow:"hidden",boxShadow:`0 4px 8px ${a(i.palette.divider,.2)}`},children:[e.jsx(re,{component:"img",sx:{width:80,objectFit:"cover"},image:t.poster,alt:t.title}),e.jsx(n,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:e.jsxs(R,{sx:{flex:"1 0 auto",py:1.5,px:2},children:[e.jsx(s,{variant:"subtitle2",component:"div",sx:{fontWeight:"bold",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:t.title}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:.5},children:[e.jsx(se,{value:t.user_rating,readOnly:!0,size:"small",precision:.5}),e.jsx(W,{label:g(t.status).label,size:"small",variant:"outlined",sx:{height:20,fontSize:"0.625rem",color:g(t.status).color,bgcolor:a(g(t.status).color,.1),borderColor:a(g(t.status).color,.3)}})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",mt:1,fontSize:"0.75rem",color:"text.secondary"},children:[e.jsxs(s,{variant:"caption",children:["IMDb: ",t.imdb_rating,"/10"]}),e.jsx(s,{variant:"caption",children:T(t.created_at)})]})]})})]})},l))}),A().length===0&&e.jsx(n,{sx:{textAlign:"center",py:4},children:e.jsx(s,{color:"text.secondary",children:f==="all"?"İstifadəçi film əlavə etməyib.":`İstifadəçinin "${K(f)}" statusunda filmi yoxdur.`})}),A().length>J&&e.jsx(n,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsx(m,{variant:"outlined",color:"primary",onClick:ze,size:"small",sx:{borderRadius:2,textTransform:"none",px:3},children:"Daha çox"})})]}),e.jsxs(x,{elevation:3,sx:{p:3,borderRadius:3,background:u?a(i.palette.background.paper,.8):a(i.palette.background.paper,.7),backdropFilter:"blur(10px)"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{position:"relative",display:"inline-block",mb:2,"&:after":{content:'""',position:"absolute",width:"30%",height:"3px",bottom:"-5px",left:0,backgroundColor:u?"#bb86fc":"#3f51b5",borderRadius:"2px"}},children:"Yakında Gələcək Xüsusiyyətlər"}),e.jsxs(c,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(M,{sx:{bgcolor:a(i.palette.info.main,.08),borderRadius:2},children:e.jsxs(R,{children:[e.jsx(s,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Film Müzakirələri"}),e.jsx(s,{variant:"body2",children:"İstifadəçinin filmlərlə bağlı yazdığı müzakirələri və rəylərini görəcəksiniz."})]})})}),e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsx(M,{sx:{bgcolor:a(i.palette.success.main,.08),borderRadius:2},children:e.jsxs(R,{children:[e.jsx(s,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"İzləmə Cədvəli"}),e.jsx(s,{variant:"body2",children:"İstifadəçinin sosial film platforması üçün izləmə cədvəlini görə biləcəksiniz."})]})})})]})]})]})]}):null;return L?e.jsx(B,{maxWidth:"lg",sx:{py:4},children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{item:!0,xs:12,md:4,children:e.jsxs(x,{elevation:3,sx:{p:3,borderRadius:3},children:[e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(h,{variant:"circular",width:120,height:120,sx:{mb:2}}),e.jsx(h,{variant:"text",width:"60%",height:36,sx:{mb:1}}),e.jsx(h,{variant:"text",width:"40%",height:24,sx:{mb:2}})]}),e.jsx(Q,{sx:{my:2}}),e.jsx(h,{variant:"rectangular",height:120})]})}),e.jsxs(c,{item:!0,xs:12,md:8,children:[e.jsxs(x,{elevation:3,sx:{p:3,borderRadius:3,mb:3},children:[e.jsx(h,{variant:"text",width:"40%",height:36,sx:{mb:2}}),e.jsx(h,{variant:"rectangular",height:100})]}),e.jsxs(x,{elevation:3,sx:{p:3,borderRadius:3},children:[e.jsx(h,{variant:"text",width:"60%",height:36,sx:{mb:2}}),e.jsx(h,{variant:"rectangular",height:240})]})]})]})}):y||!r?e.jsx(B,{maxWidth:"lg",sx:{py:4},children:e.jsxs(x,{elevation:3,sx:{p:4,borderRadius:3,textAlign:"center",bgcolor:a(i.palette.error.light,.1)},children:[e.jsx(s,{variant:"h5",color:"error",gutterBottom:!0,children:y||"İstifadəçi profili tapılmadı"}),e.jsx(s,{variant:"body1",sx:{mb:3},children:"Axtardığınız istifadəçi mövcud deyil və ya ona giriş icazəniz yoxdur."})]})}):e.jsx(B,{maxWidth:"lg",sx:{py:4},children:L?e.jsx(n,{sx:{display:"flex",justifyContent:"center",p:5},children:e.jsx(S,{})}):y?e.jsxs(x,{sx:{p:4,textAlign:"center",borderRadius:2,bgcolor:u?a(i.palette.background.paper,.6):i.palette.background.paper,backdropFilter:"blur(10px)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:[e.jsx(s,{variant:"h6",color:"error",gutterBottom:!0,children:y}),e.jsx(m,{variant:"outlined",onClick:()=>de(-1),sx:{mt:2},children:"Geri qayıt"})]}):Se()})};export{dt as default};
