import{a as C,a2 as B,e as A,k as D,u as H,r as y,d as w,j as e,b as M,aH as Y,aI as L,F as b,B as s,S as n,g as r,T as l,c as g,L as j,a4 as v,D as S,v as N,aD as T}from"./index-BpWeeXno.js";import{C as k,a as _}from"./CardContent-Bf277MNw.js";import{I as F,V as E}from"./Visibility-G43nY_ua.js";import{A as f}from"./ArrowBack-DmMnYd99.js";const Q=()=>{const t=C(),{darkMode:d}=B(),I=A(),{id:m}=D(),{isLoggedIn:u}=H(),[o,p]=y.useState({newsletter:null,loading:!0,error:null});w(t.breakpoints.down("sm")),w(t.breakpoints.down("md")),y.useEffect(()=>{(async()=>{if(m){p(i=>({...i,loading:!0,error:null}));try{const i=await Y(m);if(i.success){if(p({newsletter:i.data,loading:!1,error:null}),u)try{await L(m)}catch{}}else p(x=>({...x,loading:!1,error:"Yenilik tapılmadı"}))}catch{p(x=>({...x,loading:!1,error:"Yenilik detallarını əldə edərkən xəta baş verdi"}))}}})()},[m,u]);const $=c=>T(new Date(c),"dd MMMM yyyy, HH:mm"),z=()=>e.jsx(b,{in:o.loading,children:e.jsxs(s,{sx:{mt:4,p:3},children:[e.jsx(n,{variant:"rectangular",height:50,width:"70%",sx:{mb:2,borderRadius:1}}),e.jsx(n,{variant:"rectangular",height:30,width:"40%",sx:{mb:4,borderRadius:1}}),e.jsxs(s,{sx:{display:"flex",gap:2,mb:4},children:[e.jsx(n,{variant:"circular",width:40,height:40}),e.jsx(n,{variant:"rectangular",height:20,width:"30%",sx:{borderRadius:1}})]}),e.jsx(n,{variant:"rectangular",height:200,sx:{mb:3,borderRadius:1}}),e.jsx(n,{variant:"rectangular",height:200,sx:{mb:3,borderRadius:1}}),e.jsx(n,{variant:"rectangular",height:100,sx:{borderRadius:1}})]})}),R=()=>e.jsx(b,{in:!!o.error,children:e.jsxs(k,{elevation:3,sx:{p:{xs:3,md:4},mt:4,textAlign:"center",bgcolor:r(t.palette.error.main,.05),borderRadius:2,border:`1px solid ${r(t.palette.error.main,.2)}`,transition:"all 0.3s ease"},children:[e.jsxs(s,{sx:{mb:3},children:[e.jsx(F,{color:"error",sx:{fontSize:40,mb:2}}),e.jsx(l,{color:"error",variant:"h5",gutterBottom:!0,fontWeight:"bold",children:o.error}),e.jsx(l,{color:"text.secondary",variant:"body1",sx:{maxWidth:500,mx:"auto",mb:3},children:"İstədiyiniz yenilik tapılmadı və ya əldə edilərkən xəta baş verdi. Zəhmət olmasa daha sonra yenidən cəhd edin."})]}),e.jsx(g,{variant:"contained",color:"primary",size:"large",onClick:()=>I("/newsletters"),startIcon:e.jsx(f,{}),sx:{px:3,py:1,borderRadius:2,boxShadow:t.shadows[4],transition:"transform 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[8]}},children:"Yeniliklər səhifəsinə qayıt"})]})}),W=()=>{if(!o.newsletter)return null;const{title:c,content:i,created_at:x,updated_at:V,author:a,is_important:h}=o.newsletter;return e.jsx(b,{in:!o.loading&&!o.error,children:e.jsxs(s,{children:[e.jsxs(s,{sx:{mb:{xs:3,md:4},transition:"all 0.3s ease",position:"relative",display:"flex",alignItems:"center",gap:1},children:[e.jsx(g,{component:j,to:"/newsletters",startIcon:e.jsx(f,{}),variant:"outlined",size:"small",sx:{borderRadius:2,minWidth:"auto",px:1.5,py:.8,fontSize:"0.85rem",fontWeight:600,boxShadow:`0 2px 4px ${r(t.palette.common.black,.05)}`,transition:"all 0.2s ease","&:hover":{transform:"translateX(-3px)"}},children:"Yeniliklər"}),e.jsxs(l,{variant:"h6",color:"text.secondary",sx:{mx:1,fontSize:{xs:"1rem",sm:"1.1rem"},fontWeight:400,display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{margin:"0 10px",color:r(t.palette.text.secondary,.6)},children:"/"}),"Yenilik Detalları"]})]}),e.jsxs(k,{elevation:3,sx:{borderRadius:{xs:2,md:3},overflow:"hidden",transition:"all 0.3s ease",boxShadow:d?`0 8px 20px ${r(t.palette.common.black,.2)}`:`0 8px 20px ${r(t.palette.common.black,.1)}`,border:`1px solid ${r(t.palette.divider,d?.1:.05)}`,position:"relative"},children:[h&&e.jsx(s,{sx:{position:"absolute",top:0,right:0,bgcolor:t.palette.error.main,color:"#fff",px:{xs:2,md:3},py:.8,borderBottomLeftRadius:12,fontWeight:"bold",fontSize:{xs:"0.8rem",md:"0.9rem"},zIndex:10,boxShadow:`0 2px 8px ${r(t.palette.error.main,.5)}`,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Vacib"}),e.jsxs(s,{sx:{background:d?`linear-gradient(135deg, ${r(t.palette.primary.dark,.15)} 0%, ${r(t.palette.background.paper,.1)} 100%)`:`linear-gradient(135deg, ${r(t.palette.primary.light,.2)} 0%, ${r(t.palette.background.paper,.02)} 100%)`,pt:{xs:3,md:4},pb:{xs:2,md:3},px:{xs:2,sm:3,md:4},borderBottom:`1px solid ${r(t.palette.divider,.08)}`},children:[e.jsx(l,{variant:"h3",component:"h1",sx:{fontWeight:700,fontSize:{xs:"1.6rem",sm:"2rem",md:"2.4rem"},color:h?t.palette.error.main:t.palette.text.primary,mb:2,lineHeight:1.3,textShadow:d?"0 1px 2px rgba(0,0,0,0.2)":"none",position:"relative",display:"inline-block","&::after":h?{content:'""',position:"absolute",left:0,bottom:-8,height:"3px",width:"60px",borderRadius:"3px",backgroundColor:t.palette.error.main}:{content:'""',position:"absolute",left:0,bottom:-8,height:"3px",width:"60px",borderRadius:"3px",backgroundColor:t.palette.primary.main}},children:c}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,mb:2,flexWrap:"wrap"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(v,{src:a==null?void 0:a.avatar_url,alt:a==null?void 0:a.username,sx:{width:32,height:32},children:a!=null&&a.username?a.username.charAt(0).toUpperCase():"S"}),e.jsx(l,{variant:"body2",sx:{fontWeight:500},children:a==null?void 0:a.username})]}),e.jsx(S,{orientation:"vertical",flexItem:!0}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:$(x)}),e.jsx(S,{orientation:"vertical",flexItem:!0}),e.jsx(N,{title:"Görüntülenme sayısı",children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(v,{sx:{width:26,height:26,bgcolor:r(t.palette.success.main,.1),color:t.palette.success.main},children:e.jsx(E,{sx:{fontSize:16}})}),e.jsx(l,{variant:"body2",sx:{fontWeight:500},children:o.newsletter.view_count||0})]})})]})]}),e.jsx(_,{sx:{p:{xs:2,sm:3,md:4},"&:last-child":{pb:{xs:3,sm:4}}},children:e.jsx(s,{className:"newsletter-content",sx:{px:{xs:0,md:1},color:t.palette.text.primary,fontSize:{xs:"1rem",md:"1.05rem"},lineHeight:1.8,wordBreak:"break-word","& img":{maxWidth:"100%",height:"auto",borderRadius:1,my:2,boxShadow:`0 3px 8px ${r(t.palette.common.black,.1)}`},"& p":{mb:2,lineHeight:1.8},"& h1, & h2, & h3, & h4, & h5, & h6":{mt:{xs:3,md:4},mb:2,fontWeight:700,fontFamily:"'Montserrat', sans-serif",color:t.palette.text.primary,lineHeight:1.3},"& h1":{fontSize:{xs:"1.8rem",md:"2.2rem"}},"& h2":{fontSize:{xs:"1.6rem",md:"1.8rem"}},"& h3":{fontSize:{xs:"1.4rem",md:"1.6rem"}},"& h4":{fontSize:{xs:"1.25rem",md:"1.4rem"}},"& h5":{fontSize:{xs:"1.1rem",md:"1.25rem"}},"& h6":{fontSize:{xs:"1rem",md:"1.1rem"}},"& ul, & ol":{pl:3,mb:3},"& li":{mb:1,pl:1},"& a":{color:t.palette.primary.main,textDecoration:"none",borderBottom:`1px dotted ${r(t.palette.primary.main,.4)}`,transition:"all 0.2s ease","&:hover":{color:t.palette.primary.dark,borderBottom:`1px solid ${t.palette.primary.main}`}},"& blockquote":{borderLeft:`4px solid ${t.palette.primary.main}`,pl:3,py:1,my:3,bgcolor:r(t.palette.primary.main,.05),borderRadius:1,fontStyle:"italic",boxShadow:`inset 0 0 0 1px ${r(t.palette.primary.main,.1)}`},"& code":{bgcolor:r(t.palette.grey[500],.2),px:1,py:.5,borderRadius:1,fontFamily:"monospace",fontSize:"0.9em"},"& pre":{bgcolor:r(t.palette.grey[900],d?.2:.1),color:d?"#e0e0e0":"#333333",p:2,borderRadius:1,overflowX:"auto",fontFamily:"monospace",fontSize:"0.9em",boxShadow:`inset 0 0 0 1px ${r(t.palette.grey[500],.2)}`},"& hr":{my:3,border:"none",height:"1px",bgcolor:t.palette.divider},"& table":{width:"100%",borderCollapse:"collapse",my:3,border:`1px solid ${r(t.palette.divider,.2)}`},"& th, & td":{border:`1px solid ${r(t.palette.divider,.2)}`,p:1.5,textAlign:"left"},"& th":{bgcolor:r(t.palette.grey[500],.1),fontWeight:"bold"}},dangerouslySetInnerHTML:{__html:i}})})]}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:{xs:3,md:4},mb:{xs:4,md:6}},children:e.jsx(g,{component:j,to:"/newsletters",startIcon:e.jsx(f,{}),variant:"contained",color:"primary",sx:{borderRadius:8,px:3,py:1.2,boxShadow:t.shadows[3],transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[6]}},children:"Yeniliklərə qayıt"})})]})})};return e.jsx(M,{maxWidth:"lg",sx:{py:{xs:3,md:6},px:{xs:2,sm:3,md:4}},children:o.loading?z():o.error?R():W()})};export{Q as default};
